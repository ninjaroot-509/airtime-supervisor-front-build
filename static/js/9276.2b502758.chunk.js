"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[9276],{22698:(e,r,t)=>{t.d(r,{A:()=>R});var a=t(58168),n=t(98587),o=t(65043),s=(t(2086),t(69292)),l=t(98610),i=t(32463),c=t(34535),d=t(72876),p=t(85865),u=t(84794),h=t(66734),x=t(70579);const m=(0,h.A)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var f=t(75429);const g=["slots","slotProps"],y=(0,c.Ay)(f.A)((e=>{let{theme:r}=e;return(0,a.A)({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,a.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,a.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})})),A=(0,c.Ay)(m)({width:24,height:16});const v=function(e){const{slots:r={},slotProps:t={}}=e,o=(0,n.A)(e,g),s=e;return(0,x.jsx)("li",{children:(0,x.jsx)(y,(0,a.A)({focusRipple:!0},o,{ownerState:s,children:(0,x.jsx)(A,(0,a.A)({as:r.CollapsedIcon,ownerState:s},t.collapsedIcon))}))})};var j=t(92532),b=t(72372);function _(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const w=(0,j.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,c.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{[`& .${w.li}`]:r.li},r.root]})({}),S=(0,c.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,c.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function B(e,r,t,a){return e.reduce(((n,o,s)=>(s<e.length-1?n=n.concat(o,(0,x.jsx)(I,{"aria-hidden":!0,className:r,ownerState:a,children:t},`separator-${s}`)):n.push(o),n)),[])}const R=o.forwardRef((function(e,r){const t=(0,d.A)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:p,component:u="nav",slots:h={},slotProps:m={},expandText:f="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:y=1,maxItems:A=8,separator:j="/"}=t,b=(0,n.A)(t,k),[w,I]=o.useState(!1),R=(0,a.A)({},t,{component:u,expanded:w,expandText:f,itemsAfterCollapse:g,itemsBeforeCollapse:y,maxItems:A,separator:j}),E=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(R),$=(0,i.Q)({elementType:h.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:R}),q=o.useRef(null),M=o.Children.toArray(c).filter((e=>o.isValidElement(e))).map(((e,r)=>(0,x.jsx)("li",{className:E.li,children:e},`child-${r}`)));return(0,x.jsx)(C,(0,a.A)({ref:r,component:u,color:"text.secondary",className:(0,s.A)(E.root,p),ownerState:R},b,{children:(0,x.jsx)(S,{className:E.ol,ref:q,ownerState:R,children:B(w||A&&M.length<=A?M:(e=>y+g>=e.length?e:[...e.slice(0,y),(0,x.jsx)(v,{"aria-label":f,slots:{CollapsedIcon:h.CollapsedIcon},slotProps:{collapsedIcon:$},onClick:()=>{I(!0);const e=q.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(M),E.separator,j,R)})}))}))},24753:(e,r,t)=>{t.d(r,{A:()=>h});var a=t(90620),n=t.n(a),o=t(96446),s=t(85865),l=t(88446),i=t(35475),c=t(22698),d=t(70579);function p(e){let{links:r,activeLast:t=!1,...a}=e;const n=r[r.length-1].name,l=r.map((e=>(0,d.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,d.jsx)("div",{children:e.name!==n?(0,d.jsx)(u,{link:e}):(0,d.jsx)(s.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:n})},e.name)));return(0,d.jsx)(c.A,{separator:(0,d.jsx)(o.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...a,children:t?l:i})}function u(e){let{link:r}=e;const{href:t,name:a,icon:n}=r;return(0,d.jsxs)(l.A,{variant:"body2",component:i.N_,to:t||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,d.jsx)(o.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),a]},a)}function h(e){let{links:r,action:t,heading:a,moreLink:i=[],sx:c,...u}=e;return(0,d.jsxs)(o.A,{sx:{mb:5,...c},children:[(0,d.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,d.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:a}),(0,d.jsx)(p,{links:r,...u})]}),t&&(0,d.jsx)(o.A,{sx:{flexShrink:0},children:t})]}),(0,d.jsx)(o.A,{sx:{mt:2},children:n()(i)?(0,d.jsx)(l.A,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,d.jsx)(l.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},29276:(e,r,t)=>{t.r(r),t.d(r,{default:()=>S});var a=t(65043),n=t(58956),o=t(73216),s=t(19252),l=t(48407),i=t(65384),c=t(11737),d=t(75910),p=t(19838),u=t(24753),h=t(73033),x=t(24858),m=t(18403),f=t(72812),g=t(68903),y=t(12110),A=t(96446),v=t(88911),j=t(53335),b=t(34866),_=t(50716),w=t(49092),k=t(70579);function C(e){let{isEdit:r,currentExchangeRate:t}=e;const s=(0,o.Zp)(),{t:c}=(0,w.B)(),{enqueueSnackbar:p}=(0,n.dh)(),u=h.Ik().shape({from_currency:h.Yj().required(c("field.required",{obj:c("field.from_currency")})),to_currency:h.Yj().required(c("field.required",{obj:c("field.to_currency")})),rate:h.ai().required(c("field.required",{obj:c("field.rate")}))}),C=(0,a.useMemo)((()=>({from_currency:(null===t||void 0===t?void 0:t.from_currency)||"",to_currency:(null===t||void 0===t?void 0:t.to_currency)||"",rate:(null===t||void 0===t?void 0:t.rate)||0,keyId:(null===t||void 0===t?void 0:t.id)||-1})),[t]),S=(0,x.mN)({resolver:(0,m.t)(u),defaultValues:C}),I=(0,i.wA)(),{reset:B,watch:R,control:E,setValue:$,handleSubmit:q,formState:{isSubmitting:M}}=S,N=R();(0,a.useEffect)((()=>{r&&t&&B(C),r||B(C)}),[r,t]);const{currencies:P}=(0,i.d4)((e=>e.generale));return(0,a.useEffect)((()=>{I((0,b._w)())}),[I]),(0,k.jsx)(j.Op,{methods:S,onSubmit:q((async()=>{try{if(r){const e=await(0,d.nI)(N);I((0,d.YC)(e))}else{const e=await(0,d.hB)(N);I((0,d.iR)(e))}B(),p(c(r?"success.UPDATED":"success.CREATE")),s(l.nB.configuration.exchange_rate)}catch(e){console.error(e);const r=(0,_.A)(e);p(c(`error.${r}`),{variant:"error"})}})),children:(0,k.jsx)(g.Ay,{container:!0,spacing:3,children:(0,k.jsx)(g.Ay,{item:!0,xs:12,md:8,children:(0,k.jsxs)(y.A,{sx:{p:3},children:[(0,k.jsxs)(A.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,k.jsxs)(j.tX,{name:"from_currency",label:c("field.from_currency"),placeholder:c("field.from_currency"),disabled:r,children:[(0,k.jsx)("option",{value:""}),null===P||void 0===P?void 0:P.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]}),(0,k.jsxs)(j.tX,{name:"to_currency",label:c("field.to_currency"),placeholder:c("field.to_currency"),disabled:r,children:[(0,k.jsx)("option",{value:""}),null===P||void 0===P?void 0:P.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]}),(0,k.jsx)(j.o3,{name:"rate",label:c("field.rate")})]}),(0,k.jsx)(v.A,{alignItems:"flex-end",sx:{mt:3},children:(0,k.jsx)(f.A,{type:"submit",variant:"contained",loading:M,children:r?c("params.save_change"):c("params.create",{obj:c("p_exchange_rate.exchange")})})})]})})})})}function S(){const{themeStretch:e}=(0,c.A)(),{t:r}=(0,w.B)(),t=(0,o.Zp)(),h=(0,i.wA)(),{enqueueSnackbar:x}=(0,n.dh)(),{pathname:m}=(0,o.zy)(),{exchangeRateKey:f=""}=(0,o.g)(),g=m.includes("edit"),[y,A]=(0,a.useState)(null);(0,a.useEffect)((()=>{g&&v()}),[f]);const v=async()=>{try{const e=await(0,d.Ej)(Number(f));A(e),h((0,d.lI)())}catch(e){console.error(e);const r=(0,_.A)(e);x(r,{variant:"error"}),t(l.nB.configuration.exchange_rate)}};return(0,k.jsx)(p.A,{title:`Configuration: ${r(g?"p_exchange_rate.edit_exchange":"p_exchange_rate.new_exchange")}`,children:(0,k.jsxs)(s.A,{maxWidth:!e&&"lg",children:[(0,k.jsx)(u.A,{heading:r(g?"p_exchange_rate.edit_exchange":"p_exchange_rate.new_exchange"),links:[{name:r("params.dashboard"),href:l.nB.root},{name:r("params.configuration"),href:l.nB.configuration.root},{name:g?`${r("p_exchange_rate.exchange")} ${null===y||void 0===y?void 0:y.from_currency} ${r("params.to")} ${null===y||void 0===y?void 0:y.to_currency}`:r("p_exchange_rate.new_exchange")}]}),(0,k.jsx)(C,{isEdit:g,currentExchangeRate:y})]})})}},50716:(e,r,t)=>{t.d(r,{A:()=>a});const a=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}}}]);
//# sourceMappingURL=9276.2b502758.chunk.js.map