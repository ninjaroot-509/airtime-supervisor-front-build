"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[6335],{1386:(e,r,s)=>{s.d(r,{R$:()=>n,ts:()=>a,uK:()=>l});var o=s(69525);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.A)(new Date(e),r)}function a(e){return(0,o.A)(new Date(e),"dd MMMM yyyy")}function l(e){return(0,o.A)(new Date(e),"dd MMM yyyy HH:mm")}},22698:(e,r,s)=>{s.d(r,{A:()=>B});var o=s(58168),n=s(98587),a=s(65043),l=(s(2086),s(69292)),t=s(98610),i=s(32463),d=s(34535),c=s(72876),p=s(85865),u=s(84794),m=s(66734),h=s(70579);const v=(0,m.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var x=s(75429);const f=["slots","slotProps"],b=(0,d.Ay)(x.A)((e=>{let{theme:r}=e;return(0,o.A)({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})})),j=(0,d.Ay)(v)({width:24,height:16});const g=function(e){const{slots:r={},slotProps:s={}}=e,a=(0,n.A)(e,f),l=e;return(0,h.jsx)("li",{children:(0,h.jsx)(b,(0,o.A)({focusRipple:!0},a,{ownerState:l,children:(0,h.jsx)(j,(0,o.A)({as:r.CollapsedIcon,ownerState:l},s.collapsedIcon))}))})};var y=s(92532),A=s(72372);function _(e){return(0,A.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{[`& .${w.li}`]:r.li},r.root]})({}),C=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function q(e,r,s,o){return e.reduce(((n,a,l)=>(l<e.length-1?n=n.concat(a,(0,h.jsx)(I,{"aria-hidden":!0,className:r,ownerState:o,children:s},`separator-${l}`)):n.push(a),n)),[])}const B=a.forwardRef((function(e,r){const s=(0,c.A)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:v={},expandText:x="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:b=1,maxItems:j=8,separator:y="/"}=s,A=(0,n.A)(s,k),[w,I]=a.useState(!1),B=(0,o.A)({},s,{component:u,expanded:w,expandText:x,itemsAfterCollapse:f,itemsBeforeCollapse:b,maxItems:j,separator:y}),M=(e=>{const{classes:r}=e;return(0,t.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(B),R=(0,i.Q)({elementType:m.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:B}),$=a.useRef(null),D=a.Children.toArray(d).filter((e=>a.isValidElement(e))).map(((e,r)=>(0,h.jsx)("li",{className:M.li,children:e},`child-${r}`)));return(0,h.jsx)(S,(0,o.A)({ref:r,component:u,color:"text.secondary",className:(0,l.A)(M.root,p),ownerState:B},A,{children:(0,h.jsx)(C,{className:M.ol,ref:$,ownerState:B,children:q(w||j&&D.length<=j?D:(e=>b+f>=e.length?e:[...e.slice(0,b),(0,h.jsx)(g,{"aria-label":x,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{I(!0);const e=$.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(D),M.separator,y,B)})}))}))},24753:(e,r,s)=>{s.d(r,{A:()=>m});var o=s(90620),n=s.n(o),a=s(96446),l=s(85865),t=s(88446),i=s(35475),d=s(22698),c=s(70579);function p(e){let{links:r,activeLast:s=!1,...o}=e;const n=r[r.length-1].name,t=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==n?(0,c.jsx)(u,{link:e}):(0,c.jsx)(l.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:n})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(a.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:s?t:i})}function u(e){let{link:r}=e;const{href:s,name:o,icon:n}=r;return(0,c.jsxs)(t.A,{variant:"body2",component:i.N_,to:s||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,c.jsx)(a.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),o]},o)}function m(e){let{links:r,action:s,heading:o,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(a.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,c.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:o}),(0,c.jsx)(p,{links:r,...u})]}),s&&(0,c.jsx)(a.A,{sx:{flexShrink:0},children:s})]}),(0,c.jsx)(a.A,{sx:{mt:2},children:n()(i)?(0,c.jsx)(t.A,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(t.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},50716:(e,r,s)=>{s.d(r,{A:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},76335:(e,r,s)=>{s.r(r),s.d(r,{default:()=>R});var o=s(65043),n=s(83665),a=s(73216),l=s(19252),t=s(48407),i=s(56056),d=s(11737),c=s(18175),p=s(19838),u=s(24753),m=s(73033),h=s(24858),v=s(18403),x=s(72812),f=s(68903),b=s(12110),j=s(96446),g=s(85865),y=s(88911),A=s(73338),_=s(1386),w=s(50467),k=(s(20974),s(53335)),S=s(34866),C=s(43409),I=s(50716),q=s(49092),B=s(70579);function M(e){let{isEdit:r,currentSupervisor:s}=e;const l=(0,a.Zp)(),{t:d}=(0,q.B)(),{enqueueSnackbar:p}=(0,n.dh)(),u=(m.Ik().shape({type_id:m.Yj().required(d("field.required",{obj:d("field.type_id")})),number_id:m.Yj().required(d("field.required",{obj:d("field.number_id")})),created_on:m.Yj().required(d("field.required",{obj:d("field.created_on")})),expired_on:m.Yj().required(d("field.required",{obj:d("field.expired_on")}))}),m.Ik().shape({phone:m.Yj().required(d("field.required",{obj:d("field.phone")})),first_name:m.Yj().required(d("field.required",{obj:d("field.first_name")})),last_name:m.Yj().required(d("field.required",{obj:d("field.last_name")})),percent:m.ai().required(d("field.required",{obj:d("field.percent")}))})),M=(0,o.useMemo)((()=>({username:(null===s||void 0===s?void 0:s.username)||"",email:(null===s||void 0===s?void 0:s.email)||"",phone:(null===s||void 0===s?void 0:s.phone)||"",first_name:(null===s||void 0===s?void 0:s.first_name)||"",last_name:(null===s||void 0===s?void 0:s.last_name)||"",photo:(null===s||void 0===s?void 0:s.photo)||null,country:(null===s||void 0===s?void 0:s.country)||"",city:(null===s||void 0===s?void 0:s.city)||"",address:(null===s||void 0===s?void 0:s.address)||"",born_date:(0,_.R$)((null===s||void 0===s?void 0:s.born_date)||new Date),is_block:(null===s||void 0===s?void 0:s.is_block)||!1,genre:(null===s||void 0===s?void 0:s.genre)||"",marital:(null===s||void 0===s?void 0:s.marital)||"",description:(null===s||void 0===s?void 0:s.description)||"",password:null,percent:(null===s||void 0===s?void 0:s.percent)||0,keyId:(null===s||void 0===s?void 0:s.uid)||-1})),[s]),R=(0,h.mN)({resolver:(0,v.t)(u),defaultValues:M}),$=(0,i.wA)(),D=(0,C.A)(),{reset:E,watch:z,control:N,setError:P,setValue:T,handleSubmit:L,formState:{isSubmitting:Y}}=R,O=z(),[H,X]=(0,o.useState)(!1);(0,o.useEffect)((()=>{r&&s&&E(M),r||E(M)}),[r,s]);const{countries:G,genres:U,maritals:W,usertypeids:F}=(0,i.d4)((e=>e.generale));(0,o.useEffect)((()=>{$((0,S.HS)()),$((0,S.Gz)()),$((0,S.X6)()),$((0,S.bC)())}),[$]);const V=(0,o.useCallback)((e=>{const r=e[0];r&&T("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),X(!0)}),[T]),{fields:Z,append:K,remove:Q}=(0,h.jz)({control:N,name:"user_pieces_ids"});return(0,B.jsx)(k.Op,{methods:R,onSubmit:L((async()=>{try{const e=new FormData;if(Object.entries(O).forEach((r=>{let[s,o]=r;["photo","percent","keyId"].includes(s)||("born_date"===s?e.append(s,(0,_.R$)(o)):e.append(s,o))})),H&&e.append("photo",O.photo),e.append("percent",O.percent),e.append("keyId",O.keyId),r){const r=await(0,c.I8)(e);$((0,c.vX)(r))}else{const r=await(0,c.C1)(e);$((0,c.Zu)(r))}X(!1),E(),p(d(r?"success.UPDATED":"success.CREATE")),l(t.nB.supervisor.list)}catch(A){console.error(A);const r=(0,I.A)(A);if(p(d(`error.${r}`),{variant:"error"}),D.current){var e,s,o,n,a,i,u,m,h,v,x,f,b,j,g,y;if(null!==(e=A.response)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.phone)P("phone",{...A,message:null===(h=A.response)||void 0===h||null===(v=h.data)||void 0===v?void 0:v.phone});if(null!==(o=A.response)&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&n.born_date)P("born_date",{...A,message:null===(x=A.response)||void 0===x||null===(f=x.data)||void 0===f?void 0:f.born_date});if(null!==(a=A.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.username)P("username",{...A,message:null===(b=A.response)||void 0===b||null===(j=b.data)||void 0===j?void 0:j.username});if(A.response.data.email?P("email",{...A,message:A.response.data.email}):A.response.data.non_field_errors&&P("email",{...A,message:A.response.data.non_field_errors}),null!==(u=A.response)&&void 0!==u&&null!==(m=u.data)&&void 0!==m&&m.photo)P("photo",{...A,message:null===(g=A.response)||void 0===g||null===(y=g.data)||void 0===y?void 0:y.photo})}}})),children:(0,B.jsxs)(f.Ay,{container:!0,spacing:3,children:[(0,B.jsx)(f.Ay,{item:!0,xs:12,md:4,children:(0,B.jsxs)(b.A,{sx:{py:10,px:3},children:[r&&(0,B.jsx)(w.A,{color:O.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:O.is_block?"Banned":"Active"}),(0,B.jsx)(j.A,{sx:{mb:5},children:(0,B.jsx)(k.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:V,helperText:(0,B.jsxs)(g.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,B.jsx)("br",{})," max size of ",(0,A.tm)(3145728)]})})}),r&&(0,B.jsx)(k.b8,{name:"is_block",labelPlacement:"start",label:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(g.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,B.jsx)(g.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,B.jsx)(f.Ay,{item:!0,xs:12,md:8,children:(0,B.jsxs)(b.A,{sx:{p:3},children:[(0,B.jsxs)(j.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,B.jsx)(k.o3,{type:"email",name:"email",label:d("field.email")}),(0,B.jsx)(k.nU,{name:"phone",label:d("field.phone")}),(0,B.jsx)(k.o3,{name:"first_name",label:d("field.first_name")}),(0,B.jsx)(k.o3,{name:"last_name",label:d("field.last_name")}),(0,B.jsx)(k.zl,{name:"born_date",maxDate:new Date,label:d("field.born_date")}),(0,B.jsxs)(k.tX,{name:"genre",label:d("field.genre"),placeholder:d("field.genre"),children:[(0,B.jsx)("option",{value:""}),null===U||void 0===U?void 0:U.map((e=>(0,B.jsx)("option",{value:e,children:d(`genre.${e}`)},e)))]}),(0,B.jsxs)(k.tX,{name:"marital",label:d("field.marital"),placeholder:d("field.marital"),children:[(0,B.jsx)("option",{value:""}),null===W||void 0===W?void 0:W.map((e=>(0,B.jsx)("option",{value:e,children:d(`marital.${e}`)},e)))]}),(0,B.jsxs)(k.tX,{name:"country",label:d("field.country"),placeholder:d("field.country"),children:[(0,B.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map((e=>(0,B.jsx)("option",{value:e.id,children:d(`country.${e.name}`)},e.id)))]}),(0,B.jsx)(k.o3,{name:"city",label:d("field.city")}),(0,B.jsx)(k.o3,{name:"address",label:d("field.address")}),(0,B.jsx)(k.o3,{name:"percent",label:d("field.percent")}),(0,B.jsx)(k.o3,{name:"password",label:d("field.password")}),(0,B.jsx)(k.o3,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,B.jsx)(y.A,{alignItems:"flex-end",sx:{mt:3},children:(0,B.jsx)(x.A,{type:"submit",variant:"contained",loading:Y,children:r?d("params.save_change"):d("params.create",{obj:d("p_supervisor.supervisor")})})})]})})]})})}function R(){const{themeStretch:e}=(0,d.A)(),{t:r}=(0,q.B)(),s=(0,a.Zp)(),m=(0,i.wA)(),{enqueueSnackbar:h}=(0,n.dh)(),{pathname:v}=(0,a.zy)(),{supervisorKey:x=""}=(0,a.g)(),f=v.includes("edit"),[b,j]=(0,o.useState)(null);(0,o.useEffect)((()=>{f&&g(),m((0,c.Au)(1,1))}),[x]);const g=async()=>{try{const e=await(0,c.Nk)(x);j(e)}catch(e){console.error(e);const r=(0,I.A)(e);h(r,{variant:"error"}),s(t.nB.supervisor.supervisor)}};return(0,B.jsx)(p.A,{title:`Configuration: ${r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor")}`,children:(0,B.jsxs)(l.A,{maxWidth:!e&&"lg",children:[(0,B.jsx)(u.A,{heading:r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor"),links:[{name:r("params.dashboard"),href:t.nB.root},{name:r("p_supervisor.supervisor"),href:t.nB.supervisor.root},{name:f?`${r("p_supervisor.supervisor")} ${null===b||void 0===b?void 0:b.full_name}`:r("p_supervisor.new_supervisor")}]}),(0,B.jsx)(M,{isEdit:f,currentSupervisor:b})]})})}}}]);
//# sourceMappingURL=6335.20aacfa3.chunk.js.map