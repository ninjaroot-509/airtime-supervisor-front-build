"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[187],{24753:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(90620),r=t.n(a),s=t(96446),i=t(85865),d=t(88446),l=t(35475),o=t(22698),c=t(70579);function u(e){let{links:n,activeLast:t=!1,...a}=e;const r=n[n.length-1].name,d=n.map((e=>(0,c.jsx)(m,{link:e},e.name))),l=n.map((e=>(0,c.jsx)("div",{children:e.name!==r?(0,c.jsx)(m,{link:e}):(0,c.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:r})},e.name)));return(0,c.jsx)(o.A,{separator:(0,c.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...a,children:t?d:l})}function m(e){let{link:n}=e;const{href:t,name:a,icon:r}=n;return(0,c.jsxs)(d.A,{variant:"body2",component:l.N_,to:t||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,c.jsx)(s.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),a]},a)}function y(e){let{links:n,action:t,heading:a,moreLink:l=[],sx:o,...m}=e;return(0,c.jsxs)(s.A,{sx:{mb:5,...o},children:[(0,c.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:a}),(0,c.jsx)(u,{links:n,...m})]}),t&&(0,c.jsx)(s.A,{sx:{flexShrink:0},children:t})]}),(0,c.jsx)(s.A,{sx:{mt:2},children:r()(l)?(0,c.jsx)(d.A,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,c.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},26187:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Te});var a=t(65043),r=t(19252),s=t(48407),i=t(11737),d=t(19838),l=t(24753),o=t(96446),c=t(68903),u=t(12110),m=t(67254),y=t(76839),h=t(25078),x=t(12299),p=t(85865),b=t(72035),v=t(35866),_=t(32143),f=t(81637),A=t(74605),j=t(51962),g=t(11906),C=t(88911),k=t(83462),I=t(4219),S=t(35316),T=t(29347),W=t(83665),B=t(73216),q=t(72812),R=t(58390),w=t(94068),F=t(19825),M=t(14961),N=t(20974),E=t(26240),D=t(60292),O=t(63025),$=t(79913),P=t(34535),U=t(84794),L=t(65890),X=t(11137),z=t(70579);const K=(0,P.Ay)("div")((e=>{let{theme:n}=e;return{right:0,bottom:0,zIndex:99999,width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"}}));function H(e){let{isDashboard:n,...t}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(X.A,{}),!n&&(0,z.jsxs)(K,{...t,children:[(0,z.jsx)($.m.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:2,ease:"easeInOut",repeatDelay:1,repeat:1/0},children:(0,z.jsx)(L.A,{width:87,height:130,disabledLink:!0})}),(0,z.jsx)(o.A,{component:$.m.div,animate:{scale:[1.2,1,1,1.2,1.2],rotate:[270,0,0,270,270],opacity:[.25,1,1,1,.25],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:140,height:140,borderRadius:"25%",position:"absolute",border:e=>`solid 3px ${(0,U.X4)(e.palette.primary.dark,.24)}`}}),(0,z.jsx)(o.A,{component:$.m.div,animate:{scale:[1,1.2,1.2,1,1],rotate:[0,270,270,0,0],opacity:[1,.25,.25,.25,1],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:160,height:160,borderRadius:"25%",position:"absolute",border:e=>`solid 8px ${(0,U.X4)(e.palette.primary.dark,.24)}`}})]})]})}const Z="CL",G="CLP",J=[{value:"send",labelKey:"remesas.sendMode.send"},{value:"calc",labelKey:"remesas.sendMode.calc"}],Y={Cash:"2",Bank:"1",Wallet:"3"};function V(e,n,t){const a={},r=(e||"").toUpperCase().trim();return n.bankName.trim()||(a.bankName=t("remesas.validation.bankNameRequired")),n.bankAccType||(a.bankAccType=t("remesas.validation.bankAccTypeRequired")),"AR"===r?(/^\d{22}$/.test(n.CBU||"")||(a.CBU=t("remesas.validation.cbuInvalid")),n.bankDocument.trim()||(a.bankDocument=t("remesas.validation.cuitRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired"))):"BR"===r?(n.bankBranch.trim()||(a.bankBranch=t("remesas.validation.agencyRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{11}$/.test(n.CPF||"")||(a.CPF=t("remesas.validation.cpfInvalid"))):"CL"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{7,8}-[\dkK]$/.test(n.RUT||"")||(a.RUT=t("remesas.validation.rutInvalid"))):"US"===r||"USA"===r||"UNITED STATES"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{9}$/.test(n.RoutingNumber||"")||(a.RoutingNumber=t("remesas.validation.routingInvalid"))):"IN"===r||"INDIA"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^[A-Za-z]{4}0[A-Za-z0-9]{6}$/.test(n.IFSC||"")||(a.IFSC=t("remesas.validation.ifscInvalid"))):n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankIbanRequired")),{valid:0===Object.keys(a).length,errors:a}}const Q=e=>(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.iso_code)||(null===e||void 0===e?void 0:e.country_code)||(null===e||void 0===e?void 0:e.value)||"",ee=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||"",ne=(e,n)=>e.find((e=>Q(e)===n))||null,te=(e,n)=>e.find((e=>Q(e)===n))||null,ae=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",re=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ae(e),se=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",ie=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||se(e),de=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||(null===e||void 0===e?void 0:e.id)||"",le=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||de(e),oe=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",ce=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||oe(e),ue=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.currency)||(null===e||void 0===e?void 0:e.iso_code)||"",me=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ue(e),ye=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",he=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ye(e),xe=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.state_id)||"",pe=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.state_name)||"",be=e=>(null===e||void 0===e?void 0:e.state_id)||(null===e||void 0===e?void 0:e.stateId)||(null===e||void 0===e?void 0:e.state)||(null===e||void 0===e?void 0:e.state_code)||"",ve=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.city_id)||"",_e=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.city_name)||"",fe=e=>e.bank_id||e.BankID||e.bankId||e.bank_id_dest||e.BankId||"",Ae=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),je=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),ge={payout_method:"",sendMode:"send",selectedSenderId:"",selectedBeneId:"",calcType:"",amount:"",payoutCurrency:"",calcCountry:"",calcStateId:"",calcCityId:"",beneCountry:"",beneStateId:"",beneCityId:"",beneAddress:"",password:"",acceptTerms:!1,relationship:"",purpose_code:"",bene_message:""},Ce={bankName:"",bankAccType:"",bankAccount:"",bankDocument:"",bankBranch:"",bankCity:"",CBU:"",CPF:"",RUT:"",RoutingNumber:"",IFSC:"",bankId:""},ke={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:Z,nationality:Z,gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""},Ie={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:"",nationality:"",gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""};function Se(){const e=(0,D.wA)(),{t:n}=(0,M.B)(),{countries:t,currenciesByCountry:r,genders:i,typeDocs:d,typeSents:l,calcSents:$,typeBanks:P,statesByCountry:U,citiesByCountry:L,citiesByState:X,relationships:K,purposes:Se}=(0,D.d4)((e=>e.remesas)),Te=(0,B.Zp)(),{enqueueSnackbar:We}=(0,W.dh)(),[Be,qe]=(0,a.useState)(null),[Re,we]=(0,a.useState)(0),[Fe,Me]=(0,a.useState)(ge),[Ne,Ee]=(0,a.useState)(!1),[De,Oe]=(0,a.useState)([]),[$e,Pe]=(0,a.useState)(!1),[Ue,Le]=(0,a.useState)(""),[Xe,ze]=(0,a.useState)({}),[Ke,He]=(0,a.useState)(!1),[Ze,Ge]=(0,a.useState)(""),[Je,Ye]=(0,a.useState)(Ce),[Ve,Qe]=(0,a.useState)({}),[en,nn]=(0,a.useState)(!1),[tn,an]=(0,a.useState)(!1),[rn,sn]=(0,a.useState)(ke),[dn,ln]=(0,a.useState)(Ie),[on,cn]=(0,a.useState)(null),[un,mn]=(0,a.useState)(null),[yn,hn]=(0,a.useState)({}),[xn,pn]=(0,a.useState)({}),[bn,vn]=(0,a.useState)(!1),[_n,fn]=(0,a.useState)(!1),[An,jn]=(0,a.useState)([]),[gn,Cn]=(0,a.useState)(!1),[kn,In]=(0,a.useState)(0),[Sn,Tn]=(0,a.useState)(""),[Wn,Bn]=(0,a.useState)([]),[qn,Rn]=(0,a.useState)(!1),wn="send"===Fe.sendMode,Fn=(0,a.useMemo)((()=>[n("remesas.steps.send.type"),n("remesas.steps.send.parties"),n("remesas.steps.send.amount")]),[n]),Mn=(0,a.useMemo)((()=>[n("remesas.steps.calc.type"),n("remesas.steps.calc.amount")]),[n]),Nn=wn?Fn:Mn,En=De.find((e=>String(e.id||e.pk)===String(Fe.selectedSenderId))),Dn=Xe[Fe.selectedSenderId]||[],On=Dn.find((e=>String(e.id||e.pk)===String(Fe.selectedBeneId)));(0,a.useEffect)((()=>{wn&&Me(On?e=>({...e,beneCountry:e.beneCountry||On.nationality||"",beneStateId:On.addr_state||"",beneCityId:On.addr_city||"",beneAddress:On.addr_street||""}):e=>({...e,beneCountry:e.beneCountry||"",beneStateId:"",beneCityId:"",beneAddress:""}))}),[wn,On]),(0,a.useEffect)((()=>{Fe.beneCountry&&(e((0,O.s6)(Fe.beneCountry)),e((0,O.TF)(Fe.beneCountry)))}),[e,Fe.beneCountry]),(0,a.useEffect)((()=>{Fe.beneStateId&&e((0,O.Wv)(Fe.beneStateId))}),[e,Fe.beneStateId]);const $n=(0,a.useMemo)((()=>U[Fe.beneCountry]||[]),[U,Fe.beneCountry]),Pn=(0,a.useMemo)((()=>L[Fe.beneCountry]||[]),[L,Fe.beneCountry]),Un=(wn?Fe.beneCountry||(On?On.nationality:""):Fe.calcCountry||"")||"",Ln=(0,a.useMemo)((()=>l.map((e=>{const n=le(e),t=function(e){const n=(e||"").toLowerCase();return n.includes("bank")||n.includes("banque")||n.includes("banco")?"Bank":n.includes("wallet")||n.includes("monedero")||n.includes("portefeuille")?"Wallet":"Cash"}(n),a=String(de(e)||Y[t]||"");return{id:de(e),value:t,label:n,mmCode:a,img:"Bank"===t?"/static/icons/bank.png":"Wallet"===t?"/static/icons/wallet.png":"/static/icons/cash.png"}}))),[l]),Xn=(0,a.useMemo)((()=>$.map((e=>({value:oe(e),label:ce(e)})))),[$]),zn=(0,a.useMemo)((()=>i.map((e=>({value:ae(e),label:re(e)})))),[i]),Kn=(0,a.useMemo)((()=>d.map((e=>({value:se(e),label:ie(e)})))),[d]),Hn=(0,a.useMemo)((()=>P.map((e=>({value:ye(e)||e.value,label:he(e)})))),[P]),Zn=(0,a.useMemo)((()=>(r[Un]||[]).map((e=>({value:ue(e),label:me(e)})))),[r,Un]),Gn=(0,a.useMemo)((()=>(K||[]).map((e=>({value:de(e),label:le(e)})))),[K]),Jn=(0,a.useMemo)((()=>(Se||[]).map((e=>({value:de(e),label:le(e)})))),[Se]),Yn=(0,a.useMemo)((()=>Ln.find((e=>e.value===Fe.payout_method))||null),[Ln,Fe.payout_method]),Vn="Bank"===(null===Yn||void 0===Yn?void 0:Yn.value),Qn="Wallet"===(null===Yn||void 0===Yn?void 0:Yn.value),et=(0,a.useMemo)((()=>Vn?(Wn||[]).map((e=>({id:e.id,name:e.name}))):[]),[Vn,Wn]),nt=(0,a.useMemo)((()=>{if(!An.length)return[];if(!Vn||!Sn)return An;return An.some((e=>fe(e)))?An.filter((e=>String(fe(e))===String(Sn))):An}),[An,Vn,Sn]),tt=(0,a.useMemo)((()=>nt.length&&(nt[kn]||nt[0])||null),[nt,kn]),at=(0,a.useMemo)((()=>{if(!tt)return{amount:0,fee:0,payout:0,debit:0,sendCurrency:G,payCurrency:Fe.payoutCurrency||""};const e=Number(tt.send_amount||tt.SendAmount||0),n=Number(tt.fees||tt.Fees||0),t=Number(null!=tt.total_send?tt.total_send:null!=tt.TotalSend?tt.TotalSend:e+n);return{amount:e,fee:n,payout:Number(tt.payment_amount||tt.PaymentAmount||0),debit:t,sendCurrency:tt.send_currency||tt.SendCurrency||G,payCurrency:tt.payment_currency||tt.PaymentCurrency||Fe.payoutCurrency||""}}),[tt,Fe.payoutCurrency]),rt="1"===Fe.calcType?Fe.payoutCurrency||"":G,st=wn&&2===Re||!wn&&1===Re,it=(0,a.useMemo)((()=>U[rn.nationality]||[]),[U,rn.nationality]),dt=(0,a.useMemo)((()=>L[rn.nationality]||[]),[L,rn.nationality]),lt=(0,a.useMemo)((()=>U[dn.nationality]||[]),[U,dn.nationality]),ot=(0,a.useMemo)((()=>L[dn.nationality]||[]),[L,dn.nationality]),ct=(0,a.useMemo)((()=>U[Fe.calcCountry]||[]),[U,Fe.calcCountry]),ut=(0,a.useMemo)((()=>L[Fe.calcCountry]||[]),[L,Fe.calcCountry]),mt=e=>n=>Me((t=>({...t,[e]:n.target.value}))),yt=e=>n=>{const t=n.target.value;Ye((n=>({...n,[e]:t}))),Qe((n=>({...n,[e]:void 0})))},ht=e=>n=>{const t=n.target.value;sn((n=>({...n,[e]:t}))),hn((n=>({...n,[e]:void 0})))},xt=e=>n=>{const t=n.target.value;ln((n=>({...n,[e]:t}))),pn((n=>({...n,[e]:void 0})))};function pt(e){let n=String(e||"").replace(/more money transfers\//i,"").replace(/more money\//i,"").trim();if(!n)return"";const t=n.split(/[\|\-\,\/]+/).map((e=>e.trim().replace(/\s+/g," ").toUpperCase())).filter(Boolean);if(0===t.length)return n;const a=[...new Set(t)];return 1===a.length?a[0]:a.join(" | ")}const bt=(0,a.useMemo)((()=>0===Re?!!Fe.payout_method&&!!Fe.sendMode:!wn||1!==Re||!!Fe.selectedSenderId&&!!Fe.selectedBeneId),[Re,wn,Fe.payout_method,Fe.sendMode,Fe.selectedSenderId,Fe.selectedBeneId]),vt=(0,a.useMemo)((()=>{if(!st)return!1;if(!Fe.amount||!Fe.calcType||!Fe.payoutCurrency)return!1;if(!tt)return!1;if(wn){if(!Fe.password||!Fe.acceptTerms)return!1;if(!En||!On)return!1;if(Vn){const{valid:e}=V(Un,Je,n);if(!e)return!1}}return!0}),[st,wn,Fe.amount,Fe.calcType,Fe.payoutCurrency,Fe.password,Fe.acceptTerms,tt,En,On,Je,Un,Vn,n]);(0,a.useEffect)((()=>{e((0,O.X6)()),e((0,O.fC)()),e((0,O.IH)()),e((0,O.U6)()),e((0,O.xW)()),e((0,O.yb)()),e((0,O.AU)()),e((0,O.OG)())}),[e]),(0,a.useEffect)((()=>{Un&&e((0,O.h6)(Un))}),[e,Un]),(0,a.useEffect)((()=>{rn.nationality&&(e((0,O.s6)(rn.nationality)),e((0,O.TF)(rn.nationality)))}),[e,rn.nationality]),(0,a.useEffect)((()=>{rn.stateId&&e((0,O.Wv)(rn.stateId))}),[e,rn.stateId]),(0,a.useEffect)((()=>{dn.nationality&&(e((0,O.s6)(dn.nationality)),e((0,O.TF)(dn.nationality)))}),[e,dn.nationality]),(0,a.useEffect)((()=>{dn.stateId&&e((0,O.Wv)(dn.stateId))}),[e,dn.stateId]),(0,a.useEffect)((()=>{Fe.calcCountry&&(e((0,O.s6)(Fe.calcCountry)),e((0,O.TF)(Fe.calcCountry)))}),[e,Fe.calcCountry]),(0,a.useEffect)((()=>{Fe.calcStateId&&e((0,O.Wv)(Fe.calcStateId))}),[e,Fe.calcStateId]),(0,a.useEffect)((()=>{(Ln.length||Xn.length||Zn.length||Gn.length||Jn.length)&&Me((e=>{let n={...e},t=!1;if(!n.payout_method&&Ln.length){const e=Ln[0].value;e&&e!==n.payout_method&&(n.payout_method=e,t=!0)}if(!n.calcType&&Xn.length){const e=Xn[0].value;e&&e!==n.calcType&&(n.calcType=e,t=!0)}if(!n.payoutCurrency&&Zn.length){const e=Zn[0].value;e&&e!==n.payoutCurrency&&(n.payoutCurrency=e,t=!0)}if(!n.relationship&&Gn.length){const e=Gn[0].value;e&&e!==n.relationship&&(n.relationship=e,t=!0)}if(!n.purpose_code&&Jn.length){const e=Jn[0].value;e&&e!==n.purpose_code&&(n.purpose_code=e,t=!0)}return t?n:e}))}),[Ln,Xn,Zn,Gn,Jn]),(0,a.useEffect)((()=>{Hn.length&&Ye((e=>{if(e.bankAccType)return e;const n=Hn[0].value;return n&&n!==e.bankAccType?{...e,bankAccType:n}:e}))}),[Hn]),(0,a.useEffect)((()=>{let e=!0;return(async()=>{try{Pe(!0);const n=await(0,O.Jp)();if(!e)return;Oe(n.results||n)}catch(n){console.error("Erreur load senders",n)}finally{e&&Pe(!1)}})(),()=>{e=!1}}),[]),(0,a.useEffect)((()=>{if(!Ue||Ue.length<2)return;let e=!0;const n=setTimeout((async()=>{try{Pe(!0);const n=await(0,O.Jp)({search:Ue});if(!e)return;Oe(n.results||n)}catch(n){console.error("Erreur search senders",n)}finally{e&&Pe(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Ue]),(0,a.useEffect)((()=>{if(!Fe.selectedSenderId)return;let e=!0;const n=setTimeout((async()=>{try{He(!0);const n=Ze&&Ze.length>=2?{search:Ze}:{},t=await(0,O.Mb)(Fe.selectedSenderId,n);if(!e)return;ze((e=>({...e,[Fe.selectedSenderId]:t.results||t})))}catch(n){console.error("Erreur load beneficiaries",n)}finally{e&&He(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Fe.selectedSenderId,Ze]),(0,a.useEffect)((()=>{if(!st)return;if(!Fe.amount)return jn([]),void In(0);let e=!0;const n=setTimeout((async()=>{try{Cn(!0);const n=(null===Yn||void 0===Yn?void 0:Yn.mmCode)||"",t={country:Un,city_id:wn?Fe.beneCityId||"":Fe.calcCityId||"",bank_id:Vn&&(Je.bankId||Sn)||"",payment_currency:Fe.payoutCurrency,calc_type:Fe.calcType,amount:String(Fe.amount).replace(",","."),payout_method:n},a=await(0,O.xK)(t);if(!e)return;const r=a.options||[];jn(r),In(0)}catch(n){console.error("Erreur calculate",n),jn([]),In(0)}finally{e&&Cn(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[st,Fe.amount,Fe.payoutCurrency,Fe.calcType,Fe.payout_method,Je.bankId,Sn,Vn,Yn,Un,wn,Fe.calcCityId]),(0,a.useEffect)((()=>{if(!Vn)return Bn([]),void Tn("");if(!Fe.payoutCurrency)return;let e=!0;return(async()=>{try{Rn(!0);const n=await(0,O.Kj)({country:Un,currency:Fe.payoutCurrency});if(!e)return;const t=n||[];Bn(t),t.length?Tn((e=>e||String(t[0].id))):Tn("")}catch(n){console.error("Erreur load banks",n),e&&(Bn([]),Tn(""))}finally{e&&Rn(!1)}})(),()=>{e=!1}}),[Vn,Fe.payoutCurrency,Un]),(0,a.useEffect)((()=>{if(!Vn)return;if(!Sn&&et.length)return void Tn(et[0].id);if(!Sn)return;const e=et.find((e=>String(e.id)===String(Sn)));e&&Ye((n=>({...n,bankId:Sn,bankName:e.name||n.bankName||""})))}),[Vn,Sn,et]);const _t=(0,E.A)();return(0,z.jsx)(R.$,{dateAdapter:w.h,children:(0,z.jsxs)(o.A,{sx:{position:"relative"},children:[Ne&&(0,z.jsx)(o.A,{sx:{position:"absolute",inset:0,zIndex:20,bgcolor:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,z.jsx)(H,{})}),(0,z.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:10,children:(0,z.jsxs)(u.A,{sx:{p:3,borderRadius:2,bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:[Be&&(0,z.jsx)(o.A,{sx:{mb:2},children:(0,z.jsx)(m.A,{severity:"error",children:Be})}),(0,z.jsx)(y.A,{activeStep:Re,alternativeLabel:!0,sx:{mb:3},children:Nn.map((e=>(0,z.jsx)(h.A,{children:(0,z.jsx)(x.A,{children:e})},e)))}),0===Re&&(0,z.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,z.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,z.jsx)(p.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.paymentMethod.title")}),!Ln.length&&(0,z.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:n("remesas.sections.paymentMethod.empty")}),(0,z.jsx)(c.Ay,{container:!0,spacing:2,children:Ln.map((e=>(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsxs)(u.A,{onClick:()=>Me((n=>({...n,payout_method:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Fe.payout_method===e.value?"2px solid #1976d2":"0.5px solid #e0e0e0",transition:"all .2s","&:hover":{boxShadow:4}},children:[(0,z.jsx)(o.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,z.jsx)(o.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:e.img&&(0,z.jsx)("img",{src:e.img,alt:e.label,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,z.jsx)(p.A,{variant:"body2",sx:{fontWeight:Fe.payout_method===e.value?600:400},children:n(`remesas.enums.branchType.${e.id}`)})]})},e.value)))})]}),(0,z.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,z.jsx)(p.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.operationMode.title")}),(0,z.jsx)(c.Ay,{container:!0,spacing:2,children:J.map((e=>(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsxs)(u.A,{onClick:()=>Me((n=>({...n,sendMode:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Fe.sendMode===e.value?"2px solid #1976d2":"1px solid #e0e0e0",bgcolor:_t.palette.background.paper,transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,z.jsx)(o.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,z.jsx)(o.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,z.jsx)("img",{src:"send"===e.value?"/static/icons/send.png":"/static/icons/calculate.png",alt:n(e.labelKey),style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,z.jsx)(p.A,{variant:"body2",sx:{fontWeight:Fe.sendMode===e.value?600:400},children:n(e.labelKey)})]})},e.value)))})]})]}),wn&&1===Re&&(0,z.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,z.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,z.jsx)(p.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sender.title")}),(0,z.jsx)(b.A,{fullWidth:!0,options:De,loading:$e,value:En||null,onInputChange:(e,n)=>Le(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>Me((e=>({...e,selectedSenderId:n?n.id||n.pk:"",selectedBeneId:""}))),renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.sender.searchLabel"),required:!0})}),(0,z.jsxs)(o.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,z.jsx)(q.A,{variant:"outlined",startIcon:(0,z.jsx)(N.A,{icon:"eva:person-add-outline"}),onClick:()=>{cn(null),sn(ke),hn({}),nn(!0)},children:n("remesas.sender.add")}),(0,z.jsx)(q.A,{variant:"text",startIcon:(0,z.jsx)(N.A,{icon:"eva:edit-2-outline"}),onClick:()=>{En&&(cn(En.id||En.pk),hn({}),sn({...ke,first_name:En.first_name||"",middle_name:En.middle_name||"",last_name:En.last_name||"",maiden_name:En.maiden_name||"",phone:En.phone||"",email:En.email||"",nationality:En.nationality||"",doc_type:En.doc_type||"",doc_number:En.doc_number||"",doc_issue_date:En.doc_issue_date||"",doc_due_date:En.doc_due_date||"",doc_country:En.doc_country||"",doc_issue_date:En.doc_issue_date||"",doc_due_date:En.doc_due_date||"",gender:En.gender||"",marital_status:En.marital_status||"",activity:En.activity||"",profession:En.profession||"",position:En.position||"",dateOfBirth:En.date_of_birth||"",stateId:En.addr_state||"",cityId:En.addr_city||"",address:En.addr_street||""}),nn(!0))},disabled:!En,children:n("remesas.sender.edit")})]})]}),En&&(0,z.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,z.jsx)(p.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.bene.title")}),(0,z.jsx)(b.A,{fullWidth:!0,options:Dn,loading:Ke,value:On||null,onInputChange:(e,n)=>Ge(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>Me((e=>({...e,selectedBeneId:n?n.id||n.pk:""}))),renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.bene.searchLabel"),required:!0})}),(0,z.jsxs)(o.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,z.jsx)(q.A,{variant:"outlined",startIcon:(0,z.jsx)(N.A,{icon:"eva:person-add-outline"}),onClick:()=>{mn(null),ln(Ie),pn({}),an(!0)},disabled:!Fe.selectedSenderId,children:n("remesas.bene.add")}),(0,z.jsx)(q.A,{variant:"text",startIcon:(0,z.jsx)(N.A,{icon:"eva:edit-2-outline"}),onClick:()=>{On&&(mn(On.id||On.pk),pn({}),ln({...Ie,first_name:On.first_name||"",middle_name:On.middle_name||"",last_name:On.last_name||"",maiden_name:On.maiden_name||"",phone:On.phone||"",email:On.email||"",nationality:On.nationality||"",doc_type:On.doc_type||"",doc_number:On.doc_number||"",doc_issue_date:On.doc_issue_date||"",doc_due_date:On.doc_due_date||"",doc_country:On.doc_country||"",gender:On.gender||"",marital_status:On.marital_status||"",activity:On.activity||"",profession:On.profession||"",position:On.position||"",dateOfBirth:On.date_of_birth||"",stateId:On.addr_state||"",cityId:On.addr_city||"",address:On.addr_street||""}),an(!0))},disabled:!On,children:n("remesas.bene.edit")})]})]})]}),st&&(0,z.jsxs)(c.Ay,{container:!0,spacing:3,children:[wn&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,z.jsxs)(u.A,{sx:{p:2},children:[(0,z.jsx)(p.A,{variant:"subtitle2",children:n("remesas.sender.title")}),En?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(p.A,{variant:"body2",children:[En.first_name," ",(0,z.jsx)("br",{}),En.last_name]}),(0,z.jsx)(p.A,{variant:"body2",children:En.email}),(0,z.jsx)(p.A,{variant:"body2",children:En.phone}),(null===En||void 0===En?void 0:En.addr_state)&&(0,z.jsxs)(p.A,{variant:"body2",children:[En.addr_city," (",En.addr_state,")"]})]}):(0,z.jsx)(p.A,{variant:"body2",color:"text.secondary",children:n("remesas.sender.noneSelected")})]})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:9,children:(0,z.jsxs)(u.A,{sx:{p:2},children:[(0,z.jsx)(p.A,{variant:"subtitle2",children:n("remesas.bene.title")}),On?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(p.A,{variant:"body2",children:[On.first_name,(0,z.jsx)("br",{}),On.last_name]}),(0,z.jsx)(p.A,{variant:"body2",sx:{mb:1},children:On.phone}),(0,z.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:3.6,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:ne(t,Fe.beneCountry),onChange:(e,n)=>Me((e=>({...e,beneCountry:n?Q(n):"",beneStateId:"",beneCityId:""}))),getOptionLabel:e=>e?ee(e):"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:2.7,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Fe.beneStateId,onChange:e=>{const n=e.target.value;Me((e=>({...e,beneStateId:n,beneCityId:""})))},disabled:!Fe.beneCountry,children:$n.map((e=>(0,z.jsx)(_.A,{value:xe(e),children:pe(e)},xe(e))))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:2.7,children:(0,z.jsx)(b.A,{fullWidth:!0,options:Pn,value:Pn.find((e=>ve(e)===Fe.beneCityId))||null,onChange:(e,n)=>Me((e=>({...e,beneCityId:n?ve(n):"",beneStateId:n?be(n):""}))),getOptionLabel:e=>e?_e(e):"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.common.city"),disabled:!Fe.beneStateId,required:!0})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:Fe.beneAddress,onChange:e=>Me((n=>({...n,beneAddress:e.target.value})))})})]})]}):(0,z.jsx)(p.A,{variant:"body2",color:"text.secondary",children:n("remesas.bene.noneSelected")})]})})]}),!wn&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:ne(t,Fe.calcCountry),onChange:(e,n)=>Me((e=>({...e,calcCountry:n?Q(n):"",calcStateId:"",calcCityId:""}))),getOptionLabel:e=>e?`${ee(e)}`:"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Fe.calcStateId,onChange:e=>{const n=e.target.value;Me((e=>({...e,calcStateId:n,calcCityId:""})))},disabled:!Fe.calcCountry,children:ct.map((e=>(0,z.jsx)(_.A,{value:xe(e),children:pe(e)},xe(e))))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:ut,value:ut.find((e=>ve(e)===Fe.calcCityId))||null,onChange:(e,n)=>Me((e=>({...e,calcCityId:n?ve(n):"",calcStateId:n?be(n):""}))),getOptionLabel:e=>e?_e(e):"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!Fe.calcCountry})})})]}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.payoutCurrency"),value:Fe.payoutCurrency,onChange:mt("payoutCurrency"),required:!0,children:Zn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:e.label},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.calcType"),value:Fe.calcType,onChange:mt("calcType"),required:!0,children:Xn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.calcType.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.amount.amountWithCurrency",{currency:rt||" "}),value:Fe.amount,onChange:mt("amount"),required:!0})}),wn&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.relationship"),value:Fe.relationship,onChange:mt("relationship"),required:!0,children:Gn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.relationship.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.purpose"),value:Fe.purpose_code,onChange:mt("purpose_code"),required:!0,children:Jn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.purpose.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.beneMessage"),value:Fe.bene_message,onChange:mt("bene_message")})})]}),Vn&&(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.bankDestination"),value:Sn,onChange:e=>{Tn(e.target.value),In(0)},required:!0,disabled:qn,helperText:qn?n("remesas.bank.loading"):et.length?n("remesas.bank.choose"):n("remesas.bank.none"),children:et.map((e=>(0,z.jsx)(_.A,{value:e.id,children:e.name},e.id)))})}),(0,z.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,z.jsx)(p.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.calc.payer.title")}),gn&&(0,z.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,z.jsx)(f.A,{size:18,sx:{mr:1}}),(0,z.jsx)(p.A,{variant:"body2",color:"text.secondary",children:n("remesas.calc.loading")})]}),!gn&&!nt.length&&Fe.amount&&(0,z.jsx)(p.A,{variant:"body2",color:"error.main",sx:{mb:1},children:n("remesas.calc.noOptions")}),(0,z.jsx)(c.Ay,{container:!0,spacing:2,children:nt.map(((e,t)=>{const a=e.bank_name||e.BankName||"";return(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsxs)(u.A,{onClick:()=>In(t),sx:{p:2,cursor:"pointer",borderRadius:2,border:kn===t?"2px solid #1976d2":"1px solid #e0e0e0",transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,z.jsx)(p.A,{variant:"body2",sx:{fontWeight:600,mb:.5},children:pt(e.description||e.branch_name||e.payer_name)||"Payer"}),(0,z.jsx)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:e.branch_city&&e.branch_state?`${e.branch_city} (${e.branch_state})`:e.branch_city||e.branch_state||e.CityState||""}),Vn&&a&&(0,z.jsxs)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.bank")," ",a]}),(0,z.jsxs)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.fxPrefix")," ",null!=e.fx_rate||null!=e.ExchangeRate?Number(e.fx_rate||e.ExchangeRate).toFixed(4):"\u2014"," ",e.payment_currency||e.PaymentCurrency||Fe.payoutCurrency||"XXX","/",e.send_currency||e.SendCurrency||G||"XXX"]}),(0,z.jsxs)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.feesPrefix")," ",Number(e.fees||e.Fees||0).toFixed(2)," ",e.send_currency||e.SendCurrency||G]})]})},`${e.payer_id||e.PayerID||"p"}-${e.branch_id||e.BranchID||"b"}-${t}`)}))})]}),wn&&Vn&&(0,z.jsx)(c.Ay,{item:!0,xs:12,children:(0,z.jsxs)(u.A,{sx:{p:2,borderRadius:2,mb:1},children:[(0,z.jsx)(p.A,{variant:"subtitle2",sx:{mb:2},children:n("remesas.bank.info.title")}),(0,z.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.info.accountType"),value:Je.bankAccType,onChange:yt("bankAccType"),error:Boolean(Ve.bankAccType),helperText:Ve.bankAccType,required:!0,children:Hn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.bankAccountType.${e.value}`)},e.value)))})}),(()=>{const e=Un.toUpperCase();return"AR"===e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cbu"),value:Je.CBU,onChange:yt("CBU"),error:Boolean(Ve.CBU),helperText:Ve.CBU,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cuit"),value:Je.bankDocument,onChange:yt("bankDocument"),error:Boolean(Ve.bankDocument),helperText:Ve.bankDocument,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})})]}):"BR"===e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.branch"),value:Je.bankBranch,onChange:yt("bankBranch"),error:Boolean(Ve.bankBranch),helperText:Ve.bankBranch,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cpf"),value:Je.CPF,onChange:yt("CPF"),error:Boolean(Ve.CPF),helperText:Ve.CPF,required:!0})})]}):"CL"===e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.rut"),value:Je.RUT,onChange:yt("RUT"),error:Boolean(Ve.RUT),helperText:Ve.RUT,required:!0})})]}):"US"===e||"USA"===e||"UNITED STATES"===e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.routing"),value:Je.RoutingNumber,onChange:yt("RoutingNumber"),error:Boolean(Ve.RoutingNumber),helperText:Ve.RoutingNumber,required:!0})})]}):"IN"===e||"INDIA"===e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.ifsc"),value:Je.IFSC,onChange:yt("IFSC"),error:Boolean(Ve.IFSC),helperText:Ve.IFSC,required:!0})})]}):(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountOrIban"),value:Je.bankAccount,onChange:yt("bankAccount"),error:Boolean(Ve.bankAccount),helperText:Ve.bankAccount,required:!0})})})()]})]})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,children:(0,z.jsxs)(u.A,{sx:{p:2,bgcolor:"rgba(0,128,255,0.08)"},children:[(0,z.jsx)(p.A,{variant:"subtitle2",sx:{mb:1},children:n("remesas.summary.title")}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.inputAmount")," ",(0,z.jsxs)("strong",{children:[Fe.amount||0," ",rt||""]})]}),tt?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.network")," ",(0,z.jsx)("strong",{children:pt(tt.description||tt.branch_name||tt.payer_name)||"Payer"})]}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.toSend")," ",(0,z.jsxs)("strong",{children:[Number(tt.send_amount||tt.SendAmount||0).toFixed(2)," ",tt.send_currency||tt.SendCurrency||G]})]}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.fees")," ",(0,z.jsxs)("strong",{children:[Number(tt.fees||tt.Fees||0).toFixed(2)," ",tt.send_currency||tt.SendCurrency||G]})]}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.totalDebit")," ",(0,z.jsxs)("strong",{children:[at.debit.toFixed(2)," ",at.sendCurrency]})]}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.payoutApprox")," ",(0,z.jsxs)("strong",{children:[at.payout.toFixed(2)," ",at.payCurrency]})]}),(0,z.jsxs)(p.A,{variant:"body2",children:[n("remesas.summary.fxRate")," ",(0,z.jsx)("strong",{children:null!=tt.fx_rate||null!=tt.ExchangeRate?Number(tt.fx_rate||tt.ExchangeRate).toFixed(4):"\u2014"})]})]}):(0,z.jsx)(p.A,{variant:"body2",color:"text.secondary",children:n("remesas.summary.noResult")})]})}),wn&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,z.jsx)(v.A,{type:"password",fullWidth:!0,label:n("remesas.confirm.passwordLabel"),value:Fe.password,onChange:mt("password"),required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center"},children:(0,z.jsx)(A.A,{control:(0,z.jsx)(j.A,{checked:Fe.acceptTerms,onChange:e=>Me((n=>({...n,acceptTerms:e.target.checked})))}),label:(0,z.jsxs)(p.A,{variant:"body2",sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[n("remesas.confirm.acceptPrefix"),(0,z.jsx)(g.A,{variant:"text",color:"primary",size:"small",href:"/#/termes-conditions",target:"_blank",rel:"noopener",sx:{p:0,minWidth:0,textTransform:"none"},children:n("remesas.confirm.termsLink")})]})})})]})]}),(0,z.jsxs)(C.A,{direction:"row",justifyContent:"space-between",sx:{mt:3},children:[Re>0?(0,z.jsx)(q.A,{variant:"outlined",onClick:()=>{Re>0&&we((e=>e-1))},startIcon:(0,z.jsx)(N.A,{icon:"eva:arrow-back-outline"}),children:n("remesas.actions.back")}):(0,z.jsx)(o.A,{}),Re<Nn.length-1?(0,z.jsx)(q.A,{variant:"contained",onClick:()=>{Re<Nn.length-1&&we((e=>e+1))},endIcon:(0,z.jsx)(N.A,{icon:"eva:arrow-forward-outline"}),disabled:!bt,children:n("remesas.actions.next")}):wn&&(0,z.jsx)(q.A,{variant:"contained",color:"primary",loading:Ne,disabled:!vt,onClick:async()=>{Ee(!0),qe(null);try{if(wn){if(!En||!On||!tt)return void Ee(!1);if(Vn){const{valid:e,errors:t}=V(Un,Je,n);if(!e)return Qe(t),void Ee(!1)}const e={sender_id:En.id||En.pk,beneficiary_id:On.id||On.pk,source_country:Z,payout_country:Un,payout_currency:at.payCurrency,calc_type:Fe.calcType,amount:String(Fe.amount).replace(",","."),payout_method:(null===Yn||void 0===Yn?void 0:Yn.mmCode)||"",relationship:Fe.relationship||"8",purpose_code:Fe.purpose_code||"1",bene_message:Fe.bene_message||"",password:Fe.password,option:{payer_id:tt.payer_id||tt.payerId||tt.PayerID||tt.PayerId,branch_id:tt.branch_id||tt.BranchID||tt.branchId,bank_id:tt.bank_id||tt.BankID||Je.bankId||"",send_amount:tt.send_amount||tt.SendAmount||"",send_currency:tt.send_currency||tt.SendCurrency||G,payment_amount:tt.payment_amount||tt.PaymentAmount||"",payment_currency:tt.payment_currency||tt.PaymentCurrency||Fe.payoutCurrency,fees:tt.fees||tt.Fees||0,service_fee:tt.service_fee||tt.ServiceFee||0,vat:tt.vat||tt.TaxIva||0,other_taxes:tt.other_taxes||tt.OtherTaxes||0,fx_rate:tt.fx_rate||tt.ExchangeRate||tt.Rate||"",payer_name:tt.payer_name||tt.PayerName||tt.description||""},bank_info:Vn?Je:void 0,wallet_phone:Qn&&On.phone||""},t=await(0,O.T2)(e);We(n("success.CREATE")),Te(s.nB.ticket.view(null===t||void 0===t?void 0:t.ref_code))}}catch(t){var e;console.error("Send order error",t);const a=(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.data)||{},r=a.code||a.error||t.code||"UNEXPECTED_ERROR",s=a.message||a.detail||t.message||"",i=`remesas.errors.${String(r).toUpperCase()}`,d=n(i,{defaultValue:""})||"",l=d?`${d} (${s})`:s||n("remesas.errors.UNEXPECTED_ERROR");qe(l),We(l,{variant:"error"})}Ee(!1)},children:n("remesas.actions.confirm")})]})]})}),(0,z.jsxs)(k.A,{open:en,onClose:()=>!bn&&nn(!1),fullWidth:!0,maxWidth:"md",children:[(0,z.jsx)(I.A,{children:n(on?"remesas.sender.modal.editTitle":"remesas.sender.modal.addTitle")}),(0,z.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,z.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:rn.first_name,onChange:ht("first_name"),error:Boolean(yn.first_name),helperText:yn.first_name,required:!0,disabled:on})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:rn.last_name,onChange:ht("last_name"),error:Boolean(yn.last_name),helperText:yn.last_name,required:!0,disabled:on})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.gender"),value:rn.gender,onChange:ht("gender"),children:zn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.gender.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:ne(t,rn.nationality),onChange:(e,n)=>sn((e=>({...e,nationality:n?Q(n):"",doc_country:n?Q(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${ee(e)}`:"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(yn.nationality),helperText:yn.nationality,required:!0})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsxs)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.maritalStatus"),value:rn.marital_status,onChange:ht("marital_status"),children:[(0,z.jsx)(_.A,{value:"1",children:n("remesas.maritalStatus.other")}),(0,z.jsx)(_.A,{value:"2",children:n("remesas.maritalStatus.single")}),(0,z.jsx)(_.A,{value:"3",children:n("remesas.maritalStatus.married")}),(0,z.jsx)(_.A,{value:"4",children:n("remesas.maritalStatus.divorced")}),(0,z.jsx)(_.A,{value:"5",children:n("remesas.maritalStatus.widowed")})]})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:rn.doc_type,onChange:ht("doc_type"),error:Boolean(yn.doc_type),helperText:yn.doc_type,required:!0,children:Kn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:rn.doc_number,onChange:ht("doc_number"),error:Boolean(yn.doc_number),helperText:yn.doc_number,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:rn.doc_issue_date?new Date(rn.doc_issue_date):null,onChange:e=>sn((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:rn.doc_due_date?new Date(rn.doc_due_date):null,onChange:e=>sn((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:te(t,rn.doc_country),onChange:(e,n)=>sn((e=>({...e,doc_country:n?Q(n):""}))),getOptionLabel:e=>e?`${ee(e)}`:"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(yn.doc_country),helperText:yn.doc_country,required:!0})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:rn.phone,onChange:ht("phone")})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:rn.stateId,onChange:e=>{const n=e.target.value,t=it.find((e=>String(xe(e))===String(n)));sn((e=>({...e,stateId:n,state:t?pe(t):"",cityId:"",city:""})))},disabled:!rn.nationality,children:it.map((e=>(0,z.jsx)(_.A,{value:xe(e),children:pe(e)},xe(e))))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:dt,value:dt.find((e=>ve(e)===rn.cityId))||null,onChange:(e,n)=>sn((e=>({...e,cityId:n?ve(n):"",stateId:n?be(n):"",city:n?_e(n):""}))),getOptionLabel:e=>e?_e(e):"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!rn.nationality})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:rn.address,onChange:ht("address")})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(F.l,{label:n("remesas.form.birthDate"),format:"yyyy-MM-dd",value:rn.dateOfBirth?new Date(rn.dateOfBirth):null,onChange:e=>sn((n=>({...n,dateOfBirth:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},disabled:on})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.activity"),value:rn.activity,onChange:ht("activity")})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.profession"),value:rn.profession,onChange:ht("profession")})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.position"),value:rn.position,onChange:ht("position")})})]})}),(0,z.jsxs)(T.A,{children:[(0,z.jsx)(q.A,{onClick:()=>nn(!1),disabled:bn,children:n("remesas.actions.close")}),(0,z.jsx)(q.A,{variant:"contained",onClick:async()=>{if(hn({}),!rn.first_name.trim())return void hn((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!rn.last_name.trim())return void hn((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!rn.nationality)return void hn((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!rn.doc_type)return void hn((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!rn.doc_number.trim())return void hn((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!rn.doc_issue_date)return void hn((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!rn.doc_due_date)return void hn((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!rn.doc_country)return void hn((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})));const e=Ae(rn);try{let n;if(vn(!0),on)n=await(0,O.$S)(on,e),Oe((e=>e.map((e=>String(e.id||e.pk)===String(on)?n:e))));else{n=await(0,O.CW)(e);const t=n.id||n.pk;Oe((e=>[...e,n])),ze((e=>({...e,[t]:[]}))),Me((e=>({...e,selectedSenderId:t,selectedBeneId:""})))}sn(ke),cn(null),nn(!1)}catch(c){var t,a,r,s,i,d,l,o;console.error("Erreur save sender",c);const e=(null===c||void 0===c||null===(t=c.response)||void 0===t?void 0:t.data)||{},n={};null!==(a=e.first_name)&&void 0!==a&&a.length&&(n.first_name=e.first_name[0]),null!==(r=e.last_name)&&void 0!==r&&r.length&&(n.last_name=e.last_name[0]),null!==(s=e.doc_type)&&void 0!==s&&s.length&&(n.doc_type=e.doc_type[0]),null!==(i=e.doc_number)&&void 0!==i&&i.length&&(n.doc_number=e.doc_number[0]),null!==(d=e.doc_issue_date)&&void 0!==d&&d.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(l=e.doc_due_date)&&void 0!==l&&l.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(o=e.doc_country)&&void 0!==o&&o.length&&(n.doc_country=e.doc_country[0]),hn(n)}finally{vn(!1)}},loading:bn,children:n(on?"remesas.actions.update":"remesas.actions.add")})]})]}),(0,z.jsxs)(k.A,{open:tn,onClose:()=>!_n&&an(!1),fullWidth:!0,maxWidth:"md",children:[(0,z.jsx)(I.A,{children:n(un?"remesas.bene.modal.editTitle":"remesas.bene.modal.addTitle")}),(0,z.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,z.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:dn.first_name,onChange:xt("first_name"),error:Boolean(xn.first_name),helperText:xn.first_name,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:dn.last_name,onChange:xt("last_name"),error:Boolean(xn.last_name),helperText:xn.last_name,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:ne(t,dn.nationality),onChange:(e,n)=>ln((e=>({...e,nationality:n?Q(n):"",doc_country:n?Q(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${ee(e)}`:"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(xn.nationality),helperText:xn.nationality,required:!0})})}),"HT"!==dn.nationality&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:dn.doc_type,onChange:xt("doc_type"),error:Boolean(xn.doc_type),helperText:xn.doc_type,required:!0,children:Kn.map((e=>(0,z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:dn.doc_number,onChange:xt("doc_number"),error:Boolean(xn.doc_number),helperText:xn.doc_number,required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:dn.doc_issue_date?new Date(dn.doc_issue_date):null,onChange:e=>ln((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:dn.doc_due_date?new Date(dn.doc_due_date):null,onChange:e=>ln((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:t,value:te(t,dn.doc_country),onChange:(e,n)=>ln((e=>({...e,doc_country:n?Q(n):""}))),getOptionLabel:e=>e?`${ee(e)}`:"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(xn.doc_country),helperText:xn.doc_country,required:!0})})})]}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:dn.phone,onChange:xt("phone")})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:dn.stateId,onChange:e=>{const n=e.target.value,t=lt.find((e=>String(xe(e))===String(n)));ln((e=>({...e,stateId:n,state:t?pe(t):"",cityId:"",city:""})))},children:lt.map((e=>(0,z.jsx)(_.A,{value:xe(e),children:pe(e)},xe(e))))})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(b.A,{fullWidth:!0,options:ot,value:ot.find((e=>ve(e)===dn.cityId))||null,onChange:(e,n)=>ln((e=>({...e,cityId:n?ve(n):"",stateId:n?be(n):"",city:n?_e(n):""}))),getOptionLabel:e=>e?_e(e):"",renderInput:e=>(0,z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!dn.nationality})})}),(0,z.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:dn.address,onChange:xt("address")})})]})}),(0,z.jsxs)(T.A,{children:[(0,z.jsx)(q.A,{onClick:()=>an(!1),disabled:_n,children:n("remesas.actions.close")}),(0,z.jsx)(q.A,{variant:"contained",onClick:async()=>{if(pn({}),!Fe.selectedSenderId)return;const e="HT"===dn.nationality;if(!dn.first_name.trim())return void pn((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!dn.last_name.trim())return void pn((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!dn.nationality)return void pn((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!e){if(!dn.doc_type)return void pn((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!dn.doc_number.trim())return void pn((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!dn.doc_issue_date)return void pn((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!dn.doc_due_date)return void pn((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!dn.doc_country)return void pn((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})))}const t=je(dn);try{let e;if(fn(!0),un)e=await(0,O.lR)(un,t),ze((n=>({...n,[Fe.selectedSenderId]:(n[Fe.selectedSenderId]||[]).map((n=>String(n.id||n.pk)===String(un)?e:n))})));else{e=await(0,O.M8)(Fe.selectedSenderId,t);const n=e.id||e.pk;ze((n=>({...n,[Fe.selectedSenderId]:[...n[Fe.selectedSenderId]||[],e]}))),Me((e=>({...e,selectedBeneId:n})))}ln(Ie),mn(null),an(!1)}catch(u){var a,r,s,i,d,l,o,c;console.error("Erreur save beneficiary",u);const e=(null===u||void 0===u||null===(a=u.response)||void 0===a?void 0:a.data)||{},n={};null!==(r=e.first_name)&&void 0!==r&&r.length&&(n.first_name=e.first_name[0]),null!==(s=e.last_name)&&void 0!==s&&s.length&&(n.last_name=e.last_name[0]),null!==(i=e.doc_type)&&void 0!==i&&i.length&&(n.doc_type=e.doc_type[0]),null!==(d=e.doc_number)&&void 0!==d&&d.length&&(n.doc_number=e.doc_number[0]),null!==(l=e.doc_issue_date)&&void 0!==l&&l.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(o=e.doc_due_date)&&void 0!==o&&o.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(c=e.doc_country)&&void 0!==c&&c.length&&(n.doc_country=e.doc_country[0]),pn(n)}finally{fn(!1)}},loading:_n,disabled:!Fe.selectedSenderId,children:n(un?"remesas.actions.update":"remesas.actions.add")})]})]})]})]})})}function Te(){const{themeStretch:e}=(0,i.A)(),{t:n}=(0,M.B)();return(0,z.jsx)(d.A,{title:`Configuration: ${n("p_sendtransfer.sendtransfer")}`,children:(0,z.jsxs)(r.A,{maxWidth:!e&&"lg",children:[(0,z.jsx)(l.A,{heading:n("p_sendtransfer.sendtransfer"),links:[{name:n("params.dashboard"),href:s.nB.root},{name:n("p_sendtransfer.sendtransfer")}]}),(0,z.jsx)(Se,{})]})})}}}]);
//# sourceMappingURL=187.8d532dbe.chunk.js.map