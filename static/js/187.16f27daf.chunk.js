"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[187],{24753:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(90620),r=t.n(a),s=t(96446),i=t(85865),d=t(88446),l=t(35475),o=t(22698),c=t(70579);function u(e){let{links:n,activeLast:t=!1,...a}=e;const r=n[n.length-1].name,d=n.map((e=>(0,c.jsx)(m,{link:e},e.name))),l=n.map((e=>(0,c.jsx)("div",{children:e.name!==r?(0,c.jsx)(m,{link:e}):(0,c.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:r})},e.name)));return(0,c.jsx)(o.A,{separator:(0,c.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...a,children:t?d:l})}function m(e){let{link:n}=e;const{href:t,name:a,icon:r}=n;return(0,c.jsxs)(d.A,{variant:"body2",component:l.N_,to:t||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,c.jsx)(s.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),a]},a)}function y(e){let{links:n,action:t,heading:a,moreLink:l=[],sx:o,...m}=e;return(0,c.jsxs)(s.A,{sx:{mb:5,...o},children:[(0,c.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:a}),(0,c.jsx)(u,{links:n,...m})]}),t&&(0,c.jsx)(s.A,{sx:{flexShrink:0},children:t})]}),(0,c.jsx)(s.A,{sx:{mt:2},children:r()(l)?(0,c.jsx)(d.A,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,c.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},26187:(e,n,t)=>{t.r(n),t.d(n,{default:()=>We});var a=t(65043),r=t(19252),s=t(48407),i=t(11737),d=t(19838),l=t(24753),o=t(12110),c=t(85865),u=t(96446),m=t(68903),y=t(67254),h=t(76839),x=t(25078),p=t(12299),b=t(72035),v=t(35866),_=t(32143),f=t(81637),A=t(74605),j=t(51962),g=t(11906),C=t(88911),k=t(83462),I=t(4219),S=t(35316),T=t(29347),W=t(83665),B=t(73216),q=t(72812),R=t(58390),w=t(94068),F=t(19825),M=t(14961),N=t(20974),E=t(26240),D=t(60292),O=t(63025),$=t(30342),P=t(79913),U=t(34535),L=t(84794),X=t(65890),z=t(11137),K=t(70579);const H=(0,U.Ay)("div")((e=>{let{theme:n}=e;return{right:0,bottom:0,zIndex:99999,width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"}}));function Z(e){let{isDashboard:n,...t}=e;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(z.A,{}),!n&&(0,K.jsxs)(H,{...t,children:[(0,K.jsx)(P.m.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:2,ease:"easeInOut",repeatDelay:1,repeat:1/0},children:(0,K.jsx)(X.A,{width:87,height:130,disabledLink:!0})}),(0,K.jsx)(u.A,{component:P.m.div,animate:{scale:[1.2,1,1,1.2,1.2],rotate:[270,0,0,270,270],opacity:[.25,1,1,1,.25],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:140,height:140,borderRadius:"25%",position:"absolute",border:e=>`solid 3px ${(0,L.X4)(e.palette.primary.dark,.24)}`}}),(0,K.jsx)(u.A,{component:P.m.div,animate:{scale:[1,1.2,1.2,1,1],rotate:[0,270,270,0,0],opacity:[1,.25,.25,.25,1],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:160,height:160,borderRadius:"25%",position:"absolute",border:e=>`solid 8px ${(0,L.X4)(e.palette.primary.dark,.24)}`}})]})]})}const G="CL",J="CLP",Y=[{value:"send",labelKey:"remesas.sendMode.send"},{value:"calc",labelKey:"remesas.sendMode.calc"}],V={Cash:"2",Bank:"1",Wallet:"3"};function Q(e,n,t){const a={},r=(e||"").toUpperCase().trim();return n.bankName.trim()||(a.bankName=t("remesas.validation.bankNameRequired")),n.bankAccType||(a.bankAccType=t("remesas.validation.bankAccTypeRequired")),"AR"===r?(/^\d{22}$/.test(n.CBU||"")||(a.CBU=t("remesas.validation.cbuInvalid")),n.bankDocument.trim()||(a.bankDocument=t("remesas.validation.cuitRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired"))):"BR"===r?(n.bankBranch.trim()||(a.bankBranch=t("remesas.validation.agencyRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{11}$/.test(n.CPF||"")||(a.CPF=t("remesas.validation.cpfInvalid"))):"CL"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{7,8}-[\dkK]$/.test(n.RUT||"")||(a.RUT=t("remesas.validation.rutInvalid"))):"US"===r||"USA"===r||"UNITED STATES"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{9}$/.test(n.RoutingNumber||"")||(a.RoutingNumber=t("remesas.validation.routingInvalid"))):"IN"===r||"INDIA"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^[A-Za-z]{4}0[A-Za-z0-9]{6}$/.test(n.IFSC||"")||(a.IFSC=t("remesas.validation.ifscInvalid"))):n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankIbanRequired")),{valid:0===Object.keys(a).length,errors:a}}const ee=e=>(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.iso_code)||(null===e||void 0===e?void 0:e.country_code)||(null===e||void 0===e?void 0:e.value)||"",ne=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||"",te=(e,n)=>e.find((e=>ee(e)===n))||null,ae=(e,n)=>e.find((e=>ee(e)===n))||null,re=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",se=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||re(e),ie=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",de=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ie(e),le=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||(null===e||void 0===e?void 0:e.id)||"",oe=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||le(e),ce=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",ue=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ce(e),me=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.currency)||(null===e||void 0===e?void 0:e.iso_code)||"",ye=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||me(e),he=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",xe=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||he(e),pe=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.state_id)||"",be=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.state_name)||"",ve=e=>(null===e||void 0===e?void 0:e.state_id)||(null===e||void 0===e?void 0:e.stateId)||(null===e||void 0===e?void 0:e.state)||(null===e||void 0===e?void 0:e.state_code)||"",_e=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.city_id)||"",fe=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.city_name)||"",Ae=e=>e.bank_id||e.BankID||e.bankId||e.bank_id_dest||e.BankId||"",je=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),ge=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),Ce={payout_method:"",sendMode:"send",selectedSenderId:"",selectedBeneId:"",calcType:"",amount:"",payoutCurrency:"",calcCountry:"",calcStateId:"",calcCityId:"",beneCountry:"",beneStateId:"",beneCityId:"",beneAddress:"",password:"",acceptTerms:!1,relationship:"10",purpose_code:"1",bene_message:""},ke={bankName:"",bankAccType:"",bankAccount:"",bankDocument:"",bankBranch:"",bankCity:"",CBU:"",CPF:"",RUT:"",RoutingNumber:"",IFSC:"",bankId:""},Ie={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:G,nationality:G,gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""},Se={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:"",nationality:"",gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""};function Te(){const e=(0,D.wA)(),{t:n}=(0,M.B)(),{user:t}=(0,$.A)(),{countries:r,currenciesByCountry:i,genders:d,typeDocs:l,typeSents:P,calcSents:U,typeBanks:L,statesByCountry:X,citiesByCountry:z,citiesByState:H,relationships:Te,purposes:We}=(0,D.d4)((e=>e.remesas)),Be=(0,B.Zp)(),{enqueueSnackbar:qe}=(0,W.dh)(),[Re,we]=(0,a.useState)(null),[Fe,Me]=(0,a.useState)(0),[Ne,Ee]=(0,a.useState)(Ce),[De,Oe]=(0,a.useState)(!1),[$e,Pe]=(0,a.useState)([]),[Ue,Le]=(0,a.useState)(!1),[Xe,ze]=(0,a.useState)(""),[Ke,He]=(0,a.useState)({}),[Ze,Ge]=(0,a.useState)(!1),[Je,Ye]=(0,a.useState)(""),[Ve,Qe]=(0,a.useState)(ke),[en,nn]=(0,a.useState)({}),[tn,an]=(0,a.useState)(!1),[rn,sn]=(0,a.useState)(!1),[dn,ln]=(0,a.useState)(Ie),[on,cn]=(0,a.useState)(Se),[un,mn]=(0,a.useState)(null),[yn,hn]=(0,a.useState)(null),[xn,pn]=(0,a.useState)({}),[bn,vn]=(0,a.useState)({}),[_n,fn]=(0,a.useState)(!1),[An,jn]=(0,a.useState)(!1),[gn,Cn]=(0,a.useState)([]),[kn,In]=(0,a.useState)(!1),[Sn,Tn]=(0,a.useState)(0),[Wn,Bn]=(0,a.useState)(""),[qn,Rn]=(0,a.useState)([]),[wn,Fn]=(0,a.useState)(!1),Mn="send"===Ne.sendMode,Nn=(0,a.useMemo)((()=>[n("remesas.steps.send.type"),n("remesas.steps.send.parties"),n("remesas.steps.send.amount")]),[n]),En=(0,a.useMemo)((()=>[n("remesas.steps.calc.type"),n("remesas.steps.calc.amount")]),[n]),Dn=Mn?Nn:En,On=$e.find((e=>String(e.id||e.pk)===String(Ne.selectedSenderId))),$n=Ke[Ne.selectedSenderId]||[],Pn=$n.find((e=>String(e.id||e.pk)===String(Ne.selectedBeneId)));(0,a.useEffect)((()=>{Mn&&Ee(Pn?e=>({...e,beneCountry:e.beneCountry||Pn.nationality||"",beneStateId:Pn.addr_state||"",beneCityId:Pn.addr_city||"",beneAddress:Pn.addr_street||""}):e=>({...e,beneCountry:e.beneCountry||"",beneStateId:"",beneCityId:"",beneAddress:""}))}),[Mn,Pn]),(0,a.useEffect)((()=>{Ne.beneCountry&&(e((0,O.s6)(Ne.beneCountry)),e((0,O.TF)(Ne.beneCountry)))}),[e,Ne.beneCountry]),(0,a.useEffect)((()=>{Ne.beneStateId&&e((0,O.Wv)(Ne.beneStateId))}),[e,Ne.beneStateId]);const Un=(0,a.useMemo)((()=>X[Ne.beneCountry]||[]),[X,Ne.beneCountry]),Ln=(0,a.useMemo)((()=>z[Ne.beneCountry]||[]),[z,Ne.beneCountry]),Xn=(Mn?Ne.beneCountry||(Pn?Pn.nationality:""):Ne.calcCountry||"")||"",zn=(0,a.useMemo)((()=>P.map((e=>{const n=oe(e),t=function(e){const n=(e||"").toLowerCase();return n.includes("bank")||n.includes("banque")||n.includes("banco")?"Bank":n.includes("wallet")||n.includes("monedero")||n.includes("portefeuille")?"Wallet":"Cash"}(n),a=String(le(e)||V[t]||"");return{id:le(e),value:t,label:n,mmCode:a,img:"Bank"===t?"/static/icons/bank.png":"Wallet"===t?"/static/icons/wallet.png":"/static/icons/cash.png"}}))),[P]),Kn=(0,a.useMemo)((()=>U.map((e=>({value:ce(e),label:ue(e)})))),[U]),Hn=(0,a.useMemo)((()=>d.map((e=>({value:re(e),label:se(e)})))),[d]),Zn=(0,a.useMemo)((()=>l.map((e=>({value:ie(e),label:de(e)})))),[l]),Gn=(0,a.useMemo)((()=>L.map((e=>({value:he(e)||e.value,label:xe(e)})))),[L]),Jn=(0,a.useMemo)((()=>(i[Xn]||[]).map((e=>({value:me(e),label:ye(e)})))),[i,Xn]),Yn=(0,a.useMemo)((()=>(Te||[]).map((e=>({value:le(e),label:oe(e)})))),[Te]),Vn=(0,a.useMemo)((()=>(We||[]).map((e=>({value:le(e),label:oe(e)})))),[We]),Qn=(0,a.useMemo)((()=>zn.find((e=>e.value===Ne.payout_method))||null),[zn,Ne.payout_method]),et="Bank"===(null===Qn||void 0===Qn?void 0:Qn.value),nt="Wallet"===(null===Qn||void 0===Qn?void 0:Qn.value),tt=(0,a.useMemo)((()=>et?(qn||[]).map((e=>({id:e.id,name:e.name}))):[]),[et,qn]),at=(0,a.useMemo)((()=>{if(!gn.length)return[];if(!et||!Wn)return gn;return gn.some((e=>Ae(e)))?gn.filter((e=>String(Ae(e))===String(Wn))):gn}),[gn,et,Wn]),rt=(0,a.useMemo)((()=>at.length&&(at[Sn]||at[0])||null),[at,Sn]),st=(0,a.useMemo)((()=>{if(!rt)return{amount:0,fee:0,payout:0,debit:0,sendCurrency:J,payCurrency:Ne.payoutCurrency||""};const e=Number(rt.send_amount||rt.SendAmount||0),n=Number(rt.fees||rt.Fees||0),t=Number(null!=rt.total_send?rt.total_send:null!=rt.TotalSend?rt.TotalSend:e+n);return{amount:e,fee:n,payout:Number(rt.payment_amount||rt.PaymentAmount||0),debit:t,sendCurrency:rt.send_currency||rt.SendCurrency||J,payCurrency:rt.payment_currency||rt.PaymentCurrency||Ne.payoutCurrency||""}}),[rt,Ne.payoutCurrency]),it="1"===Ne.calcType?Ne.payoutCurrency||"":J,dt=Mn&&2===Fe||!Mn&&1===Fe,lt=(0,a.useMemo)((()=>X[dn.nationality]||[]),[X,dn.nationality]),ot=(0,a.useMemo)((()=>z[dn.nationality]||[]),[z,dn.nationality]),ct=(0,a.useMemo)((()=>X[on.nationality]||[]),[X,on.nationality]),ut=(0,a.useMemo)((()=>z[on.nationality]||[]),[z,on.nationality]),mt=(0,a.useMemo)((()=>X[Ne.calcCountry]||[]),[X,Ne.calcCountry]),yt=(0,a.useMemo)((()=>z[Ne.calcCountry]||[]),[z,Ne.calcCountry]),ht=e=>n=>Ee((t=>({...t,[e]:n.target.value}))),xt=e=>n=>{const t=n.target.value;Qe((n=>({...n,[e]:t}))),nn((n=>({...n,[e]:void 0})))},pt=e=>n=>{const t=n.target.value;ln((n=>({...n,[e]:t}))),pn((n=>({...n,[e]:void 0})))},bt=e=>n=>{const t=n.target.value;cn((n=>({...n,[e]:t}))),vn((n=>({...n,[e]:void 0})))};function vt(e){let n=String(e||"").replace(/more money transfers\//i,"").replace(/more money\//i,"").trim();if(!n)return"";const t=n.split(/[\|\-\,\/]+/).map((e=>e.trim().replace(/\s+/g," ").toUpperCase())).filter(Boolean);if(0===t.length)return n;const a=[...new Set(t)];return 1===a.length?a[0]:a.join(" | ")}const _t=(0,a.useMemo)((()=>0===Fe?!!Ne.payout_method&&!!Ne.sendMode:!Mn||1!==Fe||!!Ne.selectedSenderId&&!!Ne.selectedBeneId),[Fe,Mn,Ne.payout_method,Ne.sendMode,Ne.selectedSenderId,Ne.selectedBeneId]),ft=(0,a.useMemo)((()=>{if(!dt)return!1;if(!Ne.amount||!Ne.calcType||!Ne.payoutCurrency)return!1;if(!rt)return!1;if(Mn){if(!Ne.password||!Ne.acceptTerms)return!1;if(!On||!Pn)return!1;if(et){const{valid:e}=Q(Xn,Ve,n);if(!e)return!1}}return!0}),[dt,Mn,Ne.amount,Ne.calcType,Ne.payoutCurrency,Ne.password,Ne.acceptTerms,rt,On,Pn,Ve,Xn,et,n]);(0,a.useEffect)((()=>{e((0,O.X6)()),e((0,O.fC)()),e((0,O.IH)()),e((0,O.U6)()),e((0,O.xW)()),e((0,O.yb)()),e((0,O.AU)()),e((0,O.OG)())}),[e]),(0,a.useEffect)((()=>{Xn&&e((0,O.h6)(Xn))}),[e,Xn]),(0,a.useEffect)((()=>{dn.nationality&&(e((0,O.s6)(dn.nationality)),e((0,O.TF)(dn.nationality)))}),[e,dn.nationality]),(0,a.useEffect)((()=>{dn.stateId&&e((0,O.Wv)(dn.stateId))}),[e,dn.stateId]),(0,a.useEffect)((()=>{on.nationality&&(e((0,O.s6)(on.nationality)),e((0,O.TF)(on.nationality)))}),[e,on.nationality]),(0,a.useEffect)((()=>{on.stateId&&e((0,O.Wv)(on.stateId))}),[e,on.stateId]),(0,a.useEffect)((()=>{Ne.calcCountry&&(e((0,O.s6)(Ne.calcCountry)),e((0,O.TF)(Ne.calcCountry)))}),[e,Ne.calcCountry]),(0,a.useEffect)((()=>{Ne.calcStateId&&e((0,O.Wv)(Ne.calcStateId))}),[e,Ne.calcStateId]),(0,a.useEffect)((()=>{(zn.length||Kn.length||Jn.length||Yn.length||Vn.length)&&Ee((e=>{let n={...e},t=!1;if(!n.payout_method&&zn.length){const e=zn[0].value;e&&e!==n.payout_method&&(n.payout_method=e,t=!0)}if(!n.calcType&&Kn.length){const e=Kn[0].value;e&&e!==n.calcType&&(n.calcType=e,t=!0)}if(!n.payoutCurrency&&Jn.length){const e=Jn[0].value;e&&e!==n.payoutCurrency&&(n.payoutCurrency=e,t=!0)}if(!n.relationship&&Yn.length){const e=Yn[0].value;e&&e!==n.relationship&&(n.relationship=e,t=!0)}if(!n.purpose_code&&Vn.length){const e=Vn[0].value;e&&e!==n.purpose_code&&(n.purpose_code=e,t=!0)}return t?n:e}))}),[zn,Kn,Jn,Yn,Vn]),(0,a.useEffect)((()=>{Gn.length&&Qe((e=>{if(e.bankAccType)return e;const n=Gn[0].value;return n&&n!==e.bankAccType?{...e,bankAccType:n}:e}))}),[Gn]),(0,a.useEffect)((()=>{let e=!0;return(async()=>{try{Le(!0);const n=await(0,O.Jp)();if(!e)return;Pe(n.results||n)}catch(n){console.error("Erreur load senders",n)}finally{e&&Le(!1)}})(),()=>{e=!1}}),[]),(0,a.useEffect)((()=>{if(!Xe||Xe.length<2)return;let e=!0;const n=setTimeout((async()=>{try{Le(!0);const n=await(0,O.Jp)({search:Xe});if(!e)return;Pe(n.results||n)}catch(n){console.error("Erreur search senders",n)}finally{e&&Le(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Xe]),(0,a.useEffect)((()=>{if(!Ne.selectedSenderId)return;let e=!0;const n=setTimeout((async()=>{try{Ge(!0);const n=Je&&Je.length>=2?{search:Je}:{},t=await(0,O.Mb)(Ne.selectedSenderId,n);if(!e)return;He((e=>({...e,[Ne.selectedSenderId]:t.results||t})))}catch(n){console.error("Erreur load beneficiaries",n)}finally{e&&Ge(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Ne.selectedSenderId,Je]),(0,a.useEffect)((()=>{if(!dt)return;if(!Ne.amount)return Cn([]),void Tn(0);let e=!0;const n=setTimeout((async()=>{try{In(!0);const n=(null===Qn||void 0===Qn?void 0:Qn.mmCode)||"",t={country:Xn,city_id:Mn?Ne.beneCityId||"":Ne.calcCityId||"",bank_id:et&&(Ve.bankId||Wn)||"",payment_currency:Ne.payoutCurrency,calc_type:Ne.calcType,amount:String(Ne.amount).replace(",","."),payout_method:n},a=await(0,O.xK)(t);if(!e)return;const r=a.options||[];Cn(r),Tn(0)}catch(n){console.error("Erreur calculate",n),Cn([]),Tn(0)}finally{e&&In(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[dt,Ne.amount,Ne.payoutCurrency,Ne.calcType,Ne.payout_method,Ve.bankId,Wn,et,Qn,Xn,Mn,Ne.calcCityId]),(0,a.useEffect)((()=>{if(!et)return Rn([]),void Bn("");if(!Ne.payoutCurrency)return;let e=!0;return(async()=>{try{Fn(!0);const n=await(0,O.Kj)({country:Xn,currency:Ne.payoutCurrency});if(!e)return;const t=n||[];Rn(t),t.length?Bn((e=>e||String(t[0].id))):Bn("")}catch(n){console.error("Erreur load banks",n),e&&(Rn([]),Bn(""))}finally{e&&Fn(!1)}})(),()=>{e=!1}}),[et,Ne.payoutCurrency,Xn]),(0,a.useEffect)((()=>{if(!et)return;if(!Wn&&tt.length)return void Bn(tt[0].id);if(!Wn)return;const e=tt.find((e=>String(e.id)===String(Wn)));e&&Qe((n=>({...n,bankId:Wn,bankName:e.name||n.bankName||""})))}),[et,Wn,tt]);const At=(0,E.A)();return null!==t&&void 0!==t&&t.transfer_opt_in?(0,K.jsx)(R.$,{dateAdapter:w.h,children:(0,K.jsxs)(u.A,{sx:{position:"relative"},children:[De&&(0,K.jsx)(u.A,{sx:{position:"absolute",inset:0,zIndex:20,bgcolor:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,K.jsx)(Z,{})}),(0,K.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:10,children:(0,K.jsxs)(o.A,{sx:{p:3,borderRadius:2,bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:[Re&&(0,K.jsx)(u.A,{sx:{mb:2},children:(0,K.jsx)(y.A,{severity:"error",children:Re})}),(0,K.jsx)(h.A,{activeStep:Fe,alternativeLabel:!0,sx:{mb:3},children:Dn.map((e=>(0,K.jsx)(x.A,{children:(0,K.jsx)(p.A,{children:e})},e)))}),0===Fe&&(0,K.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,K.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,K.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.paymentMethod.title")}),!zn.length&&(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:n("remesas.sections.paymentMethod.empty")}),(0,K.jsx)(m.Ay,{container:!0,spacing:2,children:zn.map((e=>(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(o.A,{onClick:()=>Ee((n=>({...n,payout_method:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Ne.payout_method===e.value?"2px solid #1976d2":"0.5px solid #e0e0e0",transition:"all .2s","&:hover":{boxShadow:4}},children:[(0,K.jsx)(u.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,K.jsx)(u.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:e.img&&(0,K.jsx)("img",{src:e.img,alt:e.label,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,K.jsx)(c.A,{variant:"body2",sx:{fontWeight:Ne.payout_method===e.value?600:400},children:n(`remesas.enums.branchType.${e.id}`)})]})},e.value)))})]}),(0,K.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,K.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.operationMode.title")}),(0,K.jsx)(m.Ay,{container:!0,spacing:2,children:Y.map((e=>(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(o.A,{onClick:()=>Ee((n=>({...n,sendMode:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Ne.sendMode===e.value?"2px solid #1976d2":"1px solid #e0e0e0",bgcolor:At.palette.background.paper,transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,K.jsx)(u.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,K.jsx)(u.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,K.jsx)("img",{src:"send"===e.value?"/static/icons/send.png":"/static/icons/calculate.png",alt:n(e.labelKey),style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,K.jsx)(c.A,{variant:"body2",sx:{fontWeight:Ne.sendMode===e.value?600:400},children:n(e.labelKey)})]})},e.value)))})]})]}),Mn&&1===Fe&&(0,K.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,K.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,K.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sender.title")}),(0,K.jsx)(b.A,{fullWidth:!0,options:$e,loading:Ue,value:On||null,onInputChange:(e,n)=>ze(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>Ee((e=>({...e,selectedSenderId:n?n.id||n.pk:"",selectedBeneId:""}))),renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.sender.searchLabel"),required:!0})}),(0,K.jsxs)(u.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,K.jsx)(q.A,{variant:"outlined",startIcon:(0,K.jsx)(N.A,{icon:"eva:person-add-outline"}),onClick:()=>{mn(null),ln(Ie),pn({}),an(!0)},children:n("remesas.sender.add")}),(0,K.jsx)(q.A,{variant:"text",startIcon:(0,K.jsx)(N.A,{icon:"eva:edit-2-outline"}),onClick:()=>{On&&(mn(On.id||On.pk),pn({}),ln({...Ie,first_name:On.first_name||"",middle_name:On.middle_name||"",last_name:On.last_name||"",maiden_name:On.maiden_name||"",phone:On.phone||"",email:On.email||"",nationality:On.nationality||"",doc_type:On.doc_type||"",doc_number:On.doc_number||"",doc_issue_date:On.doc_issue_date||"",doc_due_date:On.doc_due_date||"",doc_country:On.doc_country||"",doc_issue_date:On.doc_issue_date||"",doc_due_date:On.doc_due_date||"",gender:On.gender||"",marital_status:On.marital_status||"",activity:On.activity||"",profession:On.profession||"",position:On.position||"",dateOfBirth:On.date_of_birth||"",stateId:On.addr_state||"",cityId:On.addr_city||"",address:On.addr_street||""}),an(!0))},disabled:!On,children:n("remesas.sender.edit")})]})]}),On&&(0,K.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,K.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.bene.title")}),(0,K.jsx)(b.A,{fullWidth:!0,options:$n,loading:Ze,value:Pn||null,onInputChange:(e,n)=>Ye(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>Ee((e=>({...e,selectedBeneId:n?n.id||n.pk:""}))),renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.bene.searchLabel"),required:!0})}),(0,K.jsxs)(u.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,K.jsx)(q.A,{variant:"outlined",startIcon:(0,K.jsx)(N.A,{icon:"eva:person-add-outline"}),onClick:()=>{hn(null),cn(Se),vn({}),sn(!0)},disabled:!Ne.selectedSenderId,children:n("remesas.bene.add")}),(0,K.jsx)(q.A,{variant:"text",startIcon:(0,K.jsx)(N.A,{icon:"eva:edit-2-outline"}),onClick:()=>{Pn&&(hn(Pn.id||Pn.pk),vn({}),cn({...Se,first_name:Pn.first_name||"",middle_name:Pn.middle_name||"",last_name:Pn.last_name||"",maiden_name:Pn.maiden_name||"",phone:Pn.phone||"",email:Pn.email||"",nationality:Pn.nationality||"",doc_type:Pn.doc_type||"",doc_number:Pn.doc_number||"",doc_issue_date:Pn.doc_issue_date||"",doc_due_date:Pn.doc_due_date||"",doc_country:Pn.doc_country||"",gender:Pn.gender||"",marital_status:Pn.marital_status||"",activity:Pn.activity||"",profession:Pn.profession||"",position:Pn.position||"",dateOfBirth:Pn.date_of_birth||"",stateId:Pn.addr_state||"",cityId:Pn.addr_city||"",address:Pn.addr_street||""}),sn(!0))},disabled:!Pn,children:n("remesas.bene.edit")})]})]})]}),dt&&(0,K.jsxs)(m.Ay,{container:!0,spacing:3,children:[Mn&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(o.A,{sx:{p:2},children:[(0,K.jsx)(c.A,{variant:"subtitle2",children:n("remesas.sender.title")}),On?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(c.A,{variant:"body2",children:[On.first_name," ",(0,K.jsx)("br",{}),On.last_name]}),(0,K.jsx)(c.A,{variant:"body2",children:On.email}),(0,K.jsx)(c.A,{variant:"body2",children:On.phone}),(null===On||void 0===On?void 0:On.addr_state)&&(0,K.jsxs)(c.A,{variant:"body2",children:[On.addr_city," (",On.addr_state,")"]})]}):(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.sender.noneSelected")})]})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:9,children:(0,K.jsxs)(o.A,{sx:{p:2},children:[(0,K.jsx)(c.A,{variant:"subtitle2",children:n("remesas.bene.title")}),Pn?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(c.A,{variant:"body2",children:[Pn.first_name,(0,K.jsx)("br",{}),Pn.last_name]}),(0,K.jsx)(c.A,{variant:"body2",sx:{mb:1},children:Pn.phone}),(0,K.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:3.5,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:te(r,Ne.beneCountry),onChange:(e,n)=>Ee((e=>({...e,beneCountry:n?ee(n):"",beneStateId:"",beneCityId:""}))),getOptionLabel:e=>e?ne(e):"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:2.3,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Ne.beneStateId,onChange:e=>{const n=e.target.value;Ee((e=>({...e,beneStateId:n,beneCityId:""})))},disabled:!Ne.beneCountry,children:Un.map((e=>(0,K.jsx)(_.A,{value:pe(e),children:be(e)},pe(e))))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:3.2,children:(0,K.jsx)(b.A,{fullWidth:!0,options:Ln,value:Ln.find((e=>_e(e)===Ne.beneCityId))||null,onChange:(e,n)=>Ee((e=>({...e,beneCityId:n?_e(n):"",beneStateId:n?ve(n):""}))),getOptionLabel:e=>e?fe(e):"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.common.city"),disabled:!Ne.beneStateId,required:!0})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:Ne.beneAddress,onChange:e=>Ee((n=>({...n,beneAddress:e.target.value})))})})]})]}):(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.bene.noneSelected")})]})})]}),!Mn&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:te(r,Ne.calcCountry),onChange:(e,n)=>Ee((e=>({...e,calcCountry:n?ee(n):"",calcStateId:"",calcCityId:""}))),getOptionLabel:e=>e?`${ne(e)}`:"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Ne.calcStateId,onChange:e=>{const n=e.target.value;Ee((e=>({...e,calcStateId:n,calcCityId:""})))},disabled:!Ne.calcCountry,children:mt.map((e=>(0,K.jsx)(_.A,{value:pe(e),children:be(e)},pe(e))))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:yt,value:yt.find((e=>_e(e)===Ne.calcCityId))||null,onChange:(e,n)=>Ee((e=>({...e,calcCityId:n?_e(n):"",calcStateId:n?ve(n):""}))),getOptionLabel:e=>e?fe(e):"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!Ne.calcCountry})})})]}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.payoutCurrency"),value:Ne.payoutCurrency,onChange:ht("payoutCurrency"),required:!0,children:Jn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:e.label},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.calcType"),value:Ne.calcType,onChange:ht("calcType"),required:!0,children:Kn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.calcType.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.amount.amountWithCurrency",{currency:it||" "}),value:Ne.amount,onChange:ht("amount"),required:!0})}),Mn&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.relationship"),value:Ne.relationship,onChange:ht("relationship"),required:!0,children:Yn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.relationship.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.purpose"),value:Ne.purpose_code,onChange:ht("purpose_code"),required:!0,children:Vn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.purpose.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.beneMessage"),value:Ne.bene_message,onChange:ht("bene_message")})})]}),et&&(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.bankDestination"),value:Wn,onChange:e=>{Bn(e.target.value),Tn(0)},required:!0,disabled:wn,helperText:wn?n("remesas.bank.loading"):tt.length?n("remesas.bank.choose"):n("remesas.bank.none"),children:tt.map((e=>(0,K.jsx)(_.A,{value:e.id,children:e.name},e.id)))})}),(0,K.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,K.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.calc.payer.title")}),kn&&(0,K.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,K.jsx)(f.A,{size:18,sx:{mr:1}}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.calc.loading")})]}),!kn&&!at.length&&Ne.amount&&(0,K.jsx)(c.A,{variant:"body2",color:"error.main",sx:{mb:1},children:n("remesas.calc.noOptions")}),(0,K.jsx)(m.Ay,{container:!0,spacing:2,children:at.map(((e,t)=>{const a=e.bank_name||e.BankName||"";return(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(o.A,{onClick:()=>Tn(t),sx:{p:2,cursor:"pointer",borderRadius:2,border:Sn===t?"2px solid #1976d2":"1px solid #e0e0e0",transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,K.jsx)(c.A,{variant:"body2",sx:{fontWeight:600,mb:.5},children:vt(e.description||e.branch_name||e.payer_name)||"Payer"}),(0,K.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:e.branch_city&&e.branch_state?`${e.branch_city} (${e.branch_state})`:e.branch_city||e.branch_state||e.CityState||""}),et&&a&&(0,K.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.bank")," ",a]}),(0,K.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.fxPrefix")," ",null!=e.fx_rate||null!=e.ExchangeRate?Number(e.fx_rate||e.ExchangeRate).toFixed(4):"\u2014"," ",e.payment_currency||e.PaymentCurrency||Ne.payoutCurrency||"XXX","/",e.send_currency||e.SendCurrency||J||"XXX"]}),(0,K.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.feesPrefix")," ",Number(e.fees||e.Fees||0).toFixed(2)," ",e.send_currency||e.SendCurrency||J]})]})},`${e.payer_id||e.PayerID||"p"}-${e.branch_id||e.BranchID||"b"}-${t}`)}))})]}),Mn&&et&&(0,K.jsx)(m.Ay,{item:!0,xs:12,children:(0,K.jsxs)(o.A,{sx:{p:2,borderRadius:2,mb:1},children:[(0,K.jsx)(c.A,{variant:"subtitle2",sx:{mb:2},children:n("remesas.bank.info.title")}),(0,K.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.info.accountType"),value:Ve.bankAccType,onChange:xt("bankAccType"),error:Boolean(en.bankAccType),helperText:en.bankAccType,required:!0,children:Gn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.bankAccountType.${e.value}`)},e.value)))})}),(()=>{const e=Xn.toUpperCase();return"AR"===e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cbu"),value:Ve.CBU,onChange:xt("CBU"),error:Boolean(en.CBU),helperText:en.CBU,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cuit"),value:Ve.bankDocument,onChange:xt("bankDocument"),error:Boolean(en.bankDocument),helperText:en.bankDocument,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})})]}):"BR"===e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.branch"),value:Ve.bankBranch,onChange:xt("bankBranch"),error:Boolean(en.bankBranch),helperText:en.bankBranch,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cpf"),value:Ve.CPF,onChange:xt("CPF"),error:Boolean(en.CPF),helperText:en.CPF,required:!0})})]}):"CL"===e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.rut"),value:Ve.RUT,onChange:xt("RUT"),error:Boolean(en.RUT),helperText:en.RUT,required:!0})})]}):"US"===e||"USA"===e||"UNITED STATES"===e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.routing"),value:Ve.RoutingNumber,onChange:xt("RoutingNumber"),error:Boolean(en.RoutingNumber),helperText:en.RoutingNumber,required:!0})})]}):"IN"===e||"INDIA"===e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.ifsc"),value:Ve.IFSC,onChange:xt("IFSC"),error:Boolean(en.IFSC),helperText:en.IFSC,required:!0})})]}):(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountOrIban"),value:Ve.bankAccount,onChange:xt("bankAccount"),error:Boolean(en.bankAccount),helperText:en.bankAccount,required:!0})})})()]})]})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,children:(0,K.jsxs)(o.A,{sx:{p:2,bgcolor:"rgba(0,128,255,0.08)"},children:[(0,K.jsx)(c.A,{variant:"subtitle2",sx:{mb:1},children:n("remesas.summary.title")}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.inputAmount")," ",(0,K.jsxs)("strong",{children:[Ne.amount||0," ",it||""]})]}),rt?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.network")," ",(0,K.jsx)("strong",{children:vt(rt.description||rt.branch_name||rt.payer_name)||"Payer"})]}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.toSend")," ",(0,K.jsxs)("strong",{children:[Number(rt.send_amount||rt.SendAmount||0).toFixed(2)," ",rt.send_currency||rt.SendCurrency||J]})]}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.fees")," ",(0,K.jsxs)("strong",{children:[Number(rt.fees||rt.Fees||0).toFixed(2)," ",rt.send_currency||rt.SendCurrency||J]})]}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.totalDebit")," ",(0,K.jsxs)("strong",{children:[st.debit.toFixed(2)," ",st.sendCurrency]})]}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.payoutApprox")," ",(0,K.jsxs)("strong",{children:[st.payout.toFixed(2)," ",st.payCurrency]})]}),(0,K.jsxs)(c.A,{variant:"body2",children:[n("remesas.summary.fxRate")," ",(0,K.jsx)("strong",{children:null!=rt.fx_rate||null!=rt.ExchangeRate?Number(rt.fx_rate||rt.ExchangeRate).toFixed(4):"\u2014"})]})]}):(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.summary.noResult")})]})}),Mn&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(v.A,{type:"password",fullWidth:!0,label:n("remesas.confirm.passwordLabel"),value:Ne.password,onChange:ht("password"),required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center"},children:(0,K.jsx)(A.A,{control:(0,K.jsx)(j.A,{checked:Ne.acceptTerms,onChange:e=>Ee((n=>({...n,acceptTerms:e.target.checked})))}),label:(0,K.jsxs)(c.A,{variant:"body2",sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[n("remesas.confirm.acceptPrefix"),(0,K.jsx)(g.A,{variant:"text",color:"primary",size:"small",href:"/#/termes-conditions",target:"_blank",rel:"noopener",sx:{p:0,minWidth:0,textTransform:"none"},children:n("remesas.confirm.termsLink")})]})})})]})]}),(0,K.jsxs)(C.A,{direction:"row",justifyContent:"space-between",sx:{mt:3},children:[Fe>0?(0,K.jsx)(q.A,{variant:"outlined",onClick:()=>{Fe>0&&Me((e=>e-1))},startIcon:(0,K.jsx)(N.A,{icon:"eva:arrow-back-outline"}),children:n("remesas.actions.back")}):(0,K.jsx)(u.A,{}),Fe<Dn.length-1?(0,K.jsx)(q.A,{variant:"contained",onClick:()=>{Fe<Dn.length-1&&Me((e=>e+1))},endIcon:(0,K.jsx)(N.A,{icon:"eva:arrow-forward-outline"}),disabled:!_t,children:n("remesas.actions.next")}):Mn&&(0,K.jsx)(q.A,{variant:"contained",color:"primary",loading:De,disabled:!ft,onClick:async()=>{Oe(!0),we(null);try{if(Mn){if(!On||!Pn||!rt)return void Oe(!1);if(et){const{valid:e,errors:t}=Q(Xn,Ve,n);if(!e)return nn(t),void Oe(!1)}const e={sender_id:On.id||On.pk,beneficiary_id:Pn.id||Pn.pk,source_country:G,payout_country:Xn,payout_currency:st.payCurrency,calc_type:Ne.calcType,amount:String(Ne.amount).replace(",","."),payout_method:null===Qn||void 0===Qn?void 0:Qn.mmCode,relationship:Ne.relationship,purpose_code:Ne.purpose_code,bene_message:Ne.bene_message,password:Ne.password,option:{payer_id:rt.payer_id||rt.payerId||rt.PayerID||rt.PayerId,branch_id:rt.branch_id||rt.BranchID||rt.branchId,bank_id:rt.bank_id||rt.BankID||Ve.bankId||"",send_amount:rt.send_amount||rt.SendAmount||"",send_currency:rt.send_currency||rt.SendCurrency||J,payment_amount:rt.payment_amount||rt.PaymentAmount||"",payment_currency:rt.payment_currency||rt.PaymentCurrency||Ne.payoutCurrency,fees:rt.fees||rt.Fees||0,service_fee:rt.service_fee||rt.ServiceFee||0,vat:rt.vat||rt.TaxIva||0,other_taxes:rt.other_taxes||rt.OtherTaxes||0,fx_rate:rt.fx_rate||rt.ExchangeRate||rt.Rate||"",payer_name:rt.payer_name||rt.PayerName||rt.description||""},bank_info:et?Ve:void 0,wallet_phone:nt&&Pn.phone||""},t=await(0,O.T2)(e);qe(n("success.CREATE")),Be(s.nB.ticket.view(null===t||void 0===t?void 0:t.ref_code))}}catch(t){var e;console.error("Send order error",t);const a=(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.data)||{},r=a.code||a.error||t.code||"UNEXPECTED_ERROR",s=a.message||a.detail||t.message||"",i=`remesas.errors.${String(r).toUpperCase()}`,d=n(i,{defaultValue:""})||"",l=d?`${d} (${s})`:s||n("remesas.errors.UNEXPECTED_ERROR");we(l),qe(l,{variant:"error"})}Oe(!1)},children:n("remesas.actions.confirm")})]})]})}),(0,K.jsxs)(k.A,{open:tn,onClose:()=>!_n&&an(!1),fullWidth:!0,maxWidth:"md",children:[(0,K.jsx)(I.A,{children:n(un?"remesas.sender.modal.editTitle":"remesas.sender.modal.addTitle")}),(0,K.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,K.jsxs)(m.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:dn.first_name,onChange:pt("first_name"),error:Boolean(xn.first_name),helperText:xn.first_name,required:!0,disabled:un})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:dn.last_name,onChange:pt("last_name"),error:Boolean(xn.last_name),helperText:xn.last_name,required:!0,disabled:un})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.gender"),value:dn.gender,onChange:pt("gender"),children:Hn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.gender.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:te(r,dn.nationality),onChange:(e,n)=>ln((e=>({...e,nationality:n?ee(n):"",doc_country:n?ee(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${ne(e)}`:"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(xn.nationality),helperText:xn.nationality,required:!0})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.maritalStatus"),value:dn.marital_status,onChange:pt("marital_status"),children:[(0,K.jsx)(_.A,{value:"1",children:n("remesas.maritalStatus.other")}),(0,K.jsx)(_.A,{value:"2",children:n("remesas.maritalStatus.single")}),(0,K.jsx)(_.A,{value:"3",children:n("remesas.maritalStatus.married")}),(0,K.jsx)(_.A,{value:"4",children:n("remesas.maritalStatus.divorced")}),(0,K.jsx)(_.A,{value:"5",children:n("remesas.maritalStatus.widowed")})]})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:dn.doc_type,onChange:pt("doc_type"),error:Boolean(xn.doc_type),helperText:xn.doc_type,required:!0,children:Zn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:dn.doc_number,onChange:pt("doc_number"),error:Boolean(xn.doc_number),helperText:xn.doc_number,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:dn.doc_issue_date?new Date(dn.doc_issue_date):null,onChange:e=>ln((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:dn.doc_due_date?new Date(dn.doc_due_date):null,onChange:e=>ln((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:ae(r,dn.doc_country),onChange:(e,n)=>ln((e=>({...e,doc_country:n?ee(n):""}))),getOptionLabel:e=>e?`${ne(e)}`:"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(xn.doc_country),helperText:xn.doc_country,required:!0})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:dn.phone,onChange:pt("phone")})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:dn.stateId,onChange:e=>{const n=e.target.value,t=lt.find((e=>String(pe(e))===String(n)));ln((e=>({...e,stateId:n,state:t?be(t):"",cityId:"",city:""})))},disabled:!dn.nationality,children:lt.map((e=>(0,K.jsx)(_.A,{value:pe(e),children:be(e)},pe(e))))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:ot,value:ot.find((e=>_e(e)===dn.cityId))||null,onChange:(e,n)=>ln((e=>({...e,cityId:n?_e(n):"",stateId:n?ve(n):"",city:n?fe(n):""}))),getOptionLabel:e=>e?fe(e):"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!dn.nationality})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:dn.address,onChange:pt("address")})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(F.l,{label:n("remesas.form.birthDate"),format:"yyyy-MM-dd",value:dn.dateOfBirth?new Date(dn.dateOfBirth):null,onChange:e=>ln((n=>({...n,dateOfBirth:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},disabled:un})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.activity"),value:dn.activity,onChange:pt("activity")})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.profession"),value:dn.profession,onChange:pt("profession")})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.position"),value:dn.position,onChange:pt("position")})})]})}),(0,K.jsxs)(T.A,{children:[(0,K.jsx)(q.A,{onClick:()=>an(!1),disabled:_n,children:n("remesas.actions.close")}),(0,K.jsx)(q.A,{variant:"contained",onClick:async()=>{if(pn({}),!dn.first_name.trim())return void pn((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!dn.last_name.trim())return void pn((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!dn.nationality)return void pn((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!dn.doc_type)return void pn((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!dn.doc_number.trim())return void pn((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!dn.doc_issue_date)return void pn((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!dn.doc_due_date)return void pn((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!dn.doc_country)return void pn((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})));const e=je(dn);try{let n;if(fn(!0),un)n=await(0,O.$S)(un,e),Pe((e=>e.map((e=>String(e.id||e.pk)===String(un)?n:e))));else{n=await(0,O.CW)(e);const t=n.id||n.pk;Pe((e=>[...e,n])),He((e=>({...e,[t]:[]}))),Ee((e=>({...e,selectedSenderId:t,selectedBeneId:""})))}ln(Ie),mn(null),an(!1)}catch(c){var t,a,r,s,i,d,l,o;console.error("Erreur save sender",c);const e=(null===c||void 0===c||null===(t=c.response)||void 0===t?void 0:t.data)||{},n={};null!==(a=e.first_name)&&void 0!==a&&a.length&&(n.first_name=e.first_name[0]),null!==(r=e.last_name)&&void 0!==r&&r.length&&(n.last_name=e.last_name[0]),null!==(s=e.doc_type)&&void 0!==s&&s.length&&(n.doc_type=e.doc_type[0]),null!==(i=e.doc_number)&&void 0!==i&&i.length&&(n.doc_number=e.doc_number[0]),null!==(d=e.doc_issue_date)&&void 0!==d&&d.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(l=e.doc_due_date)&&void 0!==l&&l.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(o=e.doc_country)&&void 0!==o&&o.length&&(n.doc_country=e.doc_country[0]),pn(n)}finally{fn(!1)}},loading:_n,children:n(un?"remesas.actions.update":"remesas.actions.add")})]})]}),(0,K.jsxs)(k.A,{open:rn,onClose:()=>!An&&sn(!1),fullWidth:!0,maxWidth:"md",children:[(0,K.jsx)(I.A,{children:n(yn?"remesas.bene.modal.editTitle":"remesas.bene.modal.addTitle")}),(0,K.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,K.jsxs)(m.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:on.first_name,onChange:bt("first_name"),error:Boolean(bn.first_name),helperText:bn.first_name,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:on.last_name,onChange:bt("last_name"),error:Boolean(bn.last_name),helperText:bn.last_name,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:te(r,on.nationality),onChange:(e,n)=>cn((e=>({...e,nationality:n?ee(n):"",doc_country:n?ee(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${ne(e)}`:"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(bn.nationality),helperText:bn.nationality,required:!0})})}),"HT"!==on.nationality&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:on.doc_type,onChange:bt("doc_type"),error:Boolean(bn.doc_type),helperText:bn.doc_type,required:!0,children:Zn.map((e=>(0,K.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:on.doc_number,onChange:bt("doc_number"),error:Boolean(bn.doc_number),helperText:bn.doc_number,required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:on.doc_issue_date?new Date(on.doc_issue_date):null,onChange:e=>cn((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:on.doc_due_date?new Date(on.doc_due_date):null,onChange:e=>cn((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:r,value:ae(r,on.doc_country),onChange:(e,n)=>cn((e=>({...e,doc_country:n?ee(n):""}))),getOptionLabel:e=>e?`${ne(e)}`:"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(bn.doc_country),helperText:bn.doc_country,required:!0})})})]}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:on.phone,onChange:bt("phone")})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:on.stateId,onChange:e=>{const n=e.target.value,t=ct.find((e=>String(pe(e))===String(n)));cn((e=>({...e,stateId:n,state:t?be(t):"",cityId:"",city:""})))},children:ct.map((e=>(0,K.jsx)(_.A,{value:pe(e),children:be(e)},pe(e))))})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(b.A,{fullWidth:!0,options:ut,value:ut.find((e=>_e(e)===on.cityId))||null,onChange:(e,n)=>cn((e=>({...e,cityId:n?_e(n):"",stateId:n?ve(n):"",city:n?fe(n):""}))),getOptionLabel:e=>e?fe(e):"",renderInput:e=>(0,K.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!on.nationality})})}),(0,K.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:on.address,onChange:bt("address")})})]})}),(0,K.jsxs)(T.A,{children:[(0,K.jsx)(q.A,{onClick:()=>sn(!1),disabled:An,children:n("remesas.actions.close")}),(0,K.jsx)(q.A,{variant:"contained",onClick:async()=>{if(vn({}),!Ne.selectedSenderId)return;const e="HT"===on.nationality;if(!on.first_name.trim())return void vn((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!on.last_name.trim())return void vn((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!on.nationality)return void vn((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!e){if(!on.doc_type)return void vn((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!on.doc_number.trim())return void vn((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!on.doc_issue_date)return void vn((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!on.doc_due_date)return void vn((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!on.doc_country)return void vn((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})))}const t=ge(on);try{let e;if(jn(!0),yn)e=await(0,O.lR)(yn,t),He((n=>({...n,[Ne.selectedSenderId]:(n[Ne.selectedSenderId]||[]).map((n=>String(n.id||n.pk)===String(yn)?e:n))})));else{e=await(0,O.M8)(Ne.selectedSenderId,t);const n=e.id||e.pk;He((n=>({...n,[Ne.selectedSenderId]:[...n[Ne.selectedSenderId]||[],e]}))),Ee((e=>({...e,selectedBeneId:n})))}cn(Se),hn(null),sn(!1)}catch(u){var a,r,s,i,d,l,o,c;console.error("Erreur save beneficiary",u);const e=(null===u||void 0===u||null===(a=u.response)||void 0===a?void 0:a.data)||{},n={};null!==(r=e.first_name)&&void 0!==r&&r.length&&(n.first_name=e.first_name[0]),null!==(s=e.last_name)&&void 0!==s&&s.length&&(n.last_name=e.last_name[0]),null!==(i=e.doc_type)&&void 0!==i&&i.length&&(n.doc_type=e.doc_type[0]),null!==(d=e.doc_number)&&void 0!==d&&d.length&&(n.doc_number=e.doc_number[0]),null!==(l=e.doc_issue_date)&&void 0!==l&&l.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(o=e.doc_due_date)&&void 0!==o&&o.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(c=e.doc_country)&&void 0!==c&&c.length&&(n.doc_country=e.doc_country[0]),vn(n)}finally{jn(!1)}},loading:An,disabled:!Ne.selectedSenderId,children:n(yn?"remesas.actions.update":"remesas.actions.add")})]})]})]})]})}):(0,K.jsxs)(o.A,{sx:{p:5,textAlign:"center"},children:[(0,K.jsx)(c.A,{variant:"h6",color:"error",sx:{mb:1},children:n("intl_transfer_denied_title")}),(0,K.jsx)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:n("intl_transfer_denied_desc")})]})}function We(){const{themeStretch:e}=(0,i.A)(),{t:n}=(0,M.B)();return(0,K.jsx)(d.A,{title:`Configuration: ${n("p_sendtransfer.sendtransfer")}`,children:(0,K.jsxs)(r.A,{maxWidth:!e&&"lg",children:[(0,K.jsx)(l.A,{heading:n("p_sendtransfer.sendtransfer"),links:[{name:n("params.dashboard"),href:s.nB.root},{name:n("p_sendtransfer.sendtransfer")}]}),(0,K.jsx)(Te,{})]})})}}}]);
//# sourceMappingURL=187.16f27daf.chunk.js.map