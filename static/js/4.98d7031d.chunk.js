"use strict";(self.webpackChunkbling=self.webpackChunkbling||[]).push([[4],{18456:(e,r,s)=>{s.d(r,{Z:()=>m});var o=s(26769),n=s.n(o),a=s(697),t=s(20890),l=s(50533),i=s(11087),d=s(93517),c=s(80184);function p(e){let{links:r,activeLast:s=!1,...o}=e;const n=r[r.length-1].name,l=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==n?(0,c.jsx)(u,{link:e}):(0,c.jsx)(t.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:n})},e.name)));return(0,c.jsx)(d.Z,{separator:(0,c.jsx)(a.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:s?l:i})}function u(e){let{link:r}=e;const{href:s,name:o,icon:n}=r;return(0,c.jsxs)(l.Z,{variant:"body2",component:i.rU,to:s||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,c.jsx)(a.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),o]},o)}function m(e){let{links:r,action:s,heading:o,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(a.Z,{sx:{mb:5,...d},children:[(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(a.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(t.Z,{variant:"h4",gutterBottom:!0,children:o}),(0,c.jsx)(p,{links:r,...u})]}),s&&(0,c.jsx)(a.Z,{sx:{flexShrink:0},children:s})]}),(0,c.jsx)(a.Z,{sx:{mt:2},children:n()(i)?(0,c.jsx)(l.Z,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(l.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},16004:(e,r,s)=>{s.r(r),s.d(r,{default:()=>R});var o=s(72791),n=s(35345),a=s(57689),t=s(89164),l=s(38072),i=s(61069),d=s(85703),c=s(4709),p=s(25212),u=s(18456),m=s(81724),x=s(61134),v=s(44695),h=s(39709),f=s(61889),b=s(57621),g=s(697),j=s(20890),y=s(36314),Z=s(7870),_=s(22654),w=s(41758),k=(s(53026),s(2190)),C=s(98226),S=s(22175),I=s(67330),q=s(33168),M=s(80184);function P(e){let{isEdit:r,currentSupervisor:s}=e;const t=(0,a.s0)(),{t:d}=(0,q.$)(),{enqueueSnackbar:p}=(0,n.Ds)(),u=(m.Ry().shape({type_id:m.Z_().required(d("field.required",{obj:d("field.type_id")})),number_id:m.Z_().required(d("field.required",{obj:d("field.number_id")})),created_on:m.Z_().required(d("field.required",{obj:d("field.created_on")})),expired_on:m.Z_().required(d("field.required",{obj:d("field.expired_on")}))}),m.Ry().shape({phone:m.Z_().required(d("field.required",{obj:d("field.phone")})),first_name:m.Z_().required(d("field.required",{obj:d("field.first_name")})),last_name:m.Z_().required(d("field.required",{obj:d("field.last_name")})),percent:m.Rx().required(d("field.required",{obj:d("field.percent")}))})),P=(0,o.useMemo)((()=>({username:(null===s||void 0===s?void 0:s.username)||"",email:(null===s||void 0===s?void 0:s.email)||"",phone:(null===s||void 0===s?void 0:s.phone)||"",first_name:(null===s||void 0===s?void 0:s.first_name)||"",last_name:(null===s||void 0===s?void 0:s.last_name)||"",photo:(null===s||void 0===s?void 0:s.photo)||null,country:(null===s||void 0===s?void 0:s.country)||"",city:(null===s||void 0===s?void 0:s.city)||"",address:(null===s||void 0===s?void 0:s.address)||"",born_date:(0,_.Q$)((null===s||void 0===s?void 0:s.born_date)||new Date),is_block:(null===s||void 0===s?void 0:s.is_block)||!1,genre:(null===s||void 0===s?void 0:s.genre)||"",marital:(null===s||void 0===s?void 0:s.marital)||"",description:(null===s||void 0===s?void 0:s.description)||"",password:null,percent:(null===s||void 0===s?void 0:s.percent)||0,keyId:(null===s||void 0===s?void 0:s.uid)||-1})),[s]),R=(0,x.cI)({resolver:(0,v.X)(u),defaultValues:P}),B=(0,i.I0)(),D=(0,S.Z)(),{reset:A,watch:E,control:T,setError:z,setValue:L,handleSubmit:$,formState:{isSubmitting:N}}=R,O=E(),[U,H]=(0,o.useState)(!1);(0,o.useEffect)((()=>{r&&s&&A(P),r||A(P)}),[r,s]);const{countries:G,genres:V,maritals:W,usertypeids:F}=(0,i.v9)((e=>e.generale));(0,o.useEffect)((()=>{B((0,C.JZ)()),B((0,C.d)()),B((0,C.ox)()),B((0,C.rf)())}),[B]);const Q=(0,o.useCallback)((e=>{const r=e[0];r&&L("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),H(!0)}),[L]),{fields:X,append:J,remove:K}=(0,x.Dq)({control:T,name:"user_pieces_ids"});return(0,M.jsx)(k.RV,{methods:R,onSubmit:$((async()=>{try{const e=new FormData;if(Object.entries(O).forEach((r=>{let[s,o]=r;["photo","percent","keyId"].includes(s)||("born_date"===s?e.append(s,(0,_.Q$)(o)):e.append(s,o))})),U&&e.append("photo",O.photo),e.append("percent",O.percent),e.append("keyId",O.keyId),r){const r=await(0,c.CG)(e);B((0,c.Fo)(r))}else{const r=await(0,c.z8)(e);B((0,c.$U)(r))}H(!1),A(),p(d(r?"success.UPDATED":"success.CREATE")),t(l.vB.supervisor.list)}catch(Z){console.error(Z);const r=(0,I.Z)(Z);if(p(d("error.".concat(r)),{variant:"error"}),D.current){var e,s,o,n,a,i,u,m,x,v,h,f,b,g,j,y;if(null!==(e=Z.response)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.phone)z("phone",{...Z,message:null===(x=Z.response)||void 0===x||null===(v=x.data)||void 0===v?void 0:v.phone});if(null!==(o=Z.response)&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&n.born_date)z("born_date",{...Z,message:null===(h=Z.response)||void 0===h||null===(f=h.data)||void 0===f?void 0:f.born_date});if(null!==(a=Z.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.username)z("username",{...Z,message:null===(b=Z.response)||void 0===b||null===(g=b.data)||void 0===g?void 0:g.username});if(Z.response.data.email?z("email",{...Z,message:Z.response.data.email}):Z.response.data.non_field_errors&&z("email",{...Z,message:Z.response.data.non_field_errors}),null!==(u=Z.response)&&void 0!==u&&null!==(m=u.data)&&void 0!==m&&m.photo)z("photo",{...Z,message:null===(j=Z.response)||void 0===j||null===(y=j.data)||void 0===y?void 0:y.photo})}}})),children:(0,M.jsxs)(f.ZP,{container:!0,spacing:3,children:[(0,M.jsx)(f.ZP,{item:!0,xs:12,md:4,children:(0,M.jsxs)(b.Z,{sx:{py:10,px:3},children:[r&&(0,M.jsx)(w.Z,{color:O.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:O.is_block?"Banned":"Active"}),(0,M.jsx)(g.Z,{sx:{mb:5},children:(0,M.jsx)(k.sX,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:Q,helperText:(0,M.jsxs)(j.Z,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,M.jsx)("br",{})," max size of ",(0,Z.oe)(3145728)]})})}),r&&(0,M.jsx)(k._e,{name:"is_block",labelPlacement:"start",label:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(j.Z,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,M.jsx)(j.Z,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,M.jsx)(f.ZP,{item:!0,xs:12,md:8,children:(0,M.jsxs)(b.Z,{sx:{p:3},children:[(0,M.jsxs)(g.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,M.jsx)(k.au,{type:"email",name:"email",label:d("field.email")}),(0,M.jsx)(k.PC,{name:"phone",label:d("field.phone")}),(0,M.jsx)(k.au,{name:"first_name",label:d("field.first_name")}),(0,M.jsx)(k.au,{name:"last_name",label:d("field.last_name")}),(0,M.jsx)(k.T$,{name:"born_date",maxDate:new Date,label:d("field.born_date")}),(0,M.jsxs)(k.Cc,{name:"genre",label:d("field.genre"),placeholder:d("field.genre"),children:[(0,M.jsx)("option",{value:""}),null===V||void 0===V?void 0:V.map((e=>(0,M.jsx)("option",{value:e,children:d("genre.".concat(e))},e)))]}),(0,M.jsxs)(k.Cc,{name:"marital",label:d("field.marital"),placeholder:d("field.marital"),children:[(0,M.jsx)("option",{value:""}),null===W||void 0===W?void 0:W.map((e=>(0,M.jsx)("option",{value:e,children:d("marital.".concat(e))},e)))]}),(0,M.jsxs)(k.Cc,{name:"country",label:d("field.country"),placeholder:d("field.country"),children:[(0,M.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map((e=>(0,M.jsx)("option",{value:e.id,children:d("country.".concat(e.name))},e.id)))]}),(0,M.jsx)(k.au,{name:"city",label:d("field.city")}),(0,M.jsx)(k.au,{name:"address",label:d("field.address")}),(0,M.jsx)(k.au,{name:"percent",label:d("field.percent")}),(0,M.jsx)(k.au,{name:"password",label:d("field.password")}),(0,M.jsx)(k.au,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,M.jsx)(y.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,M.jsx)(h.Z,{type:"submit",variant:"contained",loading:N,children:r?d("params.save_change"):d("params.create",{obj:d("p_supervisor.supervisor")})})})]})})]})})}function R(){const{themeStretch:e}=(0,d.Z)(),{t:r}=(0,q.$)(),s=(0,a.s0)(),m=(0,i.I0)(),{enqueueSnackbar:x}=(0,n.Ds)(),{pathname:v}=(0,a.TH)(),{supervisorKey:h=""}=(0,a.UO)(),f=v.includes("edit"),[b,g]=(0,o.useState)(null);(0,o.useEffect)((()=>{f&&j(),m((0,c.EL)(1,1))}),[h]);const j=async()=>{try{const e=await(0,c.ox)(h);g(e)}catch(e){console.error(e);const r=(0,I.Z)(e);x(r,{variant:"error"}),s(l.vB.supervisor.supervisor)}};return(0,M.jsx)(p.Z,{title:"Configuration: ".concat(r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor")),children:(0,M.jsxs)(t.Z,{maxWidth:!e&&"lg",children:[(0,M.jsx)(u.Z,{heading:r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor"),links:[{name:r("params.dashboard"),href:l.vB.root},{name:r("p_supervisor.supervisor"),href:l.vB.supervisor.root},{name:f?"".concat(r("p_supervisor.supervisor")," ").concat(null===b||void 0===b?void 0:b.full_name):r("p_supervisor.new_supervisor")}]}),(0,M.jsx)(P,{isEdit:f,currentSupervisor:b})]})})}},67330:(e,r,s)=>{s.d(r,{Z:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},22654:(e,r,s)=>{s.d(r,{Mu:()=>a,Q$:()=>n,zM:()=>t});var o=s(16386);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.Z)(new Date(e),r)}function a(e){return(0,o.Z)(new Date(e),"dd MMMM yyyy")}function t(e){return(0,o.Z)(new Date(e),"dd MMM yyyy HH:mm")}},93517:(e,r,s)=>{s.d(r,{Z:()=>M});var o=s(87462),n=s(63366),a=s(72791),t=(s(57441),s(63733)),l=s(94419),i=s(40536),d=s(66934),c=s(31402),p=s(20890),u=s(12065),m=s(74223),x=s(80184);const v=(0,m.Z)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=s(95080);const f=["slots","slotProps"],b=(0,d.ZP)(h.Z)((e=>{let{theme:r}=e;return(0,o.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(r.palette.grey[600],.12)})})})),g=(0,d.ZP)(v)({width:24,height:16});const j=function(e){const{slots:r={},slotProps:s={}}=e,a=(0,n.Z)(e,f),t=e;return(0,x.jsx)("li",{children:(0,x.jsx)(b,(0,o.Z)({focusRipple:!0},a,{ownerState:t,children:(0,x.jsx)(g,(0,o.Z)({as:r.CollapsedIcon,ownerState:t},s.collapsedIcon))}))})};var y=s(75878),Z=s(21217);function _(e){return(0,Z.Z)("MuiBreadcrumbs",e)}const w=(0,y.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.ZP)(p.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{["& .".concat(w.li)]:r.li},r.root]})({}),S=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function q(e,r,s,o){return e.reduce(((n,a,t)=>(t<e.length-1?n=n.concat(a,(0,x.jsx)(I,{"aria-hidden":!0,className:r,ownerState:o,children:s},"separator-".concat(t))):n.push(a),n)),[])}const M=a.forwardRef((function(e,r){const s=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:v={},expandText:h="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:b=1,maxItems:g=8,separator:y="/"}=s,Z=(0,n.Z)(s,k),[w,I]=a.useState(!1),M=(0,o.Z)({},s,{component:u,expanded:w,expandText:h,itemsAfterCollapse:f,itemsBeforeCollapse:b,maxItems:g,separator:y}),P=(e=>{const{classes:r}=e;return(0,l.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(M),R=(0,i.y)({elementType:m.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:M}),B=a.useRef(null),D=a.Children.toArray(d).filter((e=>a.isValidElement(e))).map(((e,r)=>(0,x.jsx)("li",{className:P.li,children:e},"child-".concat(r))));return(0,x.jsx)(C,(0,o.Z)({ref:r,component:u,color:"text.secondary",className:(0,t.Z)(P.root,p),ownerState:M},Z,{children:(0,x.jsx)(S,{className:P.ol,ref:B,ownerState:M,children:q(w||g&&D.length<=g?D:(e=>b+f>=e.length?e:[...e.slice(0,b),(0,x.jsx)(j,{"aria-label":h,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{I(!0);const e=B.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(D),P.separator,y,M)})}))}))}}]);
//# sourceMappingURL=4.98d7031d.chunk.js.map