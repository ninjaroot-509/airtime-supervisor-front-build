"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[1132],{22698:(e,r,o)=>{o.d(r,{A:()=>R});var t=o(58168),n=o(98587),s=o(65043),a=(o(2086),o(69292)),l=o(98610),i=o(32463),d=o(34535),c=o(72876),p=o(85865),u=o(84794),x=o(66734),h=o(70579);const m=(0,x.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var f=o(75429);const v=["slots","slotProps"],g=(0,d.Ay)(f.A)((e=>{let{theme:r}=e;return(0,t.A)({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,t.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,t.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})})),A=(0,d.Ay)(m)({width:24,height:16});const j=function(e){const{slots:r={},slotProps:o={}}=e,s=(0,n.A)(e,v),a=e;return(0,h.jsx)("li",{children:(0,h.jsx)(g,(0,t.A)({focusRipple:!0},s,{ownerState:a,children:(0,h.jsx)(A,(0,t.A)({as:r.CollapsedIcon,ownerState:a},o.collapsedIcon))}))})};var y=o(92532),b=o(72372);function w(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const C=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{[`& .${C.li}`]:r.li},r.root]})({}),I=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),_=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function B(e,r,o,t){return e.reduce(((n,s,a)=>(a<e.length-1?n=n.concat(s,(0,h.jsx)(_,{"aria-hidden":!0,className:r,ownerState:t,children:o},`separator-${a}`)):n.push(s),n)),[])}const R=s.forwardRef((function(e,r){const o=(0,c.A)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:x={},slotProps:m={},expandText:f="Show path",itemsAfterCollapse:v=1,itemsBeforeCollapse:g=1,maxItems:A=8,separator:y="/"}=o,b=(0,n.A)(o,k),[C,_]=s.useState(!1),R=(0,t.A)({},o,{component:u,expanded:C,expandText:f,itemsAfterCollapse:v,itemsBeforeCollapse:g,maxItems:A,separator:y}),N=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,r)})(R),q=(0,i.Q)({elementType:x.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:R}),M=s.useRef(null),T=s.Children.toArray(d).filter((e=>s.isValidElement(e))).map(((e,r)=>(0,h.jsx)("li",{className:N.li,children:e},`child-${r}`)));return(0,h.jsx)(S,(0,t.A)({ref:r,component:u,color:"text.secondary",className:(0,a.A)(N.root,p),ownerState:R},b,{children:(0,h.jsx)(I,{className:N.ol,ref:M,ownerState:R,children:B(C||A&&T.length<=A?T:(e=>g+v>=e.length?e:[...e.slice(0,g),(0,h.jsx)(j,{"aria-label":f,slots:{CollapsedIcon:x.CollapsedIcon},slotProps:{collapsedIcon:q},onClick:()=>{_(!0);const e=M.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-v,e.length)])(T),N.separator,y,R)})}))}))},24753:(e,r,o)=>{o.d(r,{A:()=>x});var t=o(90620),n=o.n(t),s=o(96446),a=o(85865),l=o(88446),i=o(35475),d=o(22698),c=o(70579);function p(e){let{links:r,activeLast:o=!1,...t}=e;const n=r[r.length-1].name,l=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==n?(0,c.jsx)(u,{link:e}):(0,c.jsx)(a.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:n})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...t,children:o?l:i})}function u(e){let{link:r}=e;const{href:o,name:t,icon:n}=r;return(0,c.jsxs)(l.A,{variant:"body2",component:i.N_,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,c.jsx)(s.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),t]},t)}function x(e){let{links:r,action:o,heading:t,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(s.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,c.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:t}),(0,c.jsx)(p,{links:r,...u})]}),o&&(0,c.jsx)(s.A,{sx:{flexShrink:0},children:o})]}),(0,c.jsx)(s.A,{sx:{mt:2},children:n()(i)?(0,c.jsx)(l.A,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(l.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},31132:(e,r,o)=>{o.r(r),o.d(r,{default:()=>_});var t=o(65043),n=o(19252),s=o(48407),a=o(11737),l=o(19838),i=o(24753),d=o(73033),c=o(83665),p=o(73216),u=o(24858),x=o(18403),h=o(72812),m=o(68903),f=o(12110),v=o(96446),g=o(85865),A=o(88911),j=o(53335),y=o(65384),b=o(62349),w=o(43409),C=o(50716),k=o(49092),S=o(70579);function I(){var e,r;const o=(0,p.Zp)(),{t:n}=(0,k.B)(),{enqueueSnackbar:a}=(0,c.dh)(),[l,i]=(0,t.useState)(!1),[I,_]=(0,t.useState)([]),B=d.Ik().shape({phone:d.Yj().required(n("field.required",{obj:n("field.phone")})),country:d.Yj().required(n("field.required",{obj:n("field.country")})),operator_id:d.ai().required(n("field.required",{obj:n("field.operator")})),amount:d.ai().required(n("field.required",{obj:n("field.amount")}))}),R=(0,t.useMemo)((()=>({phone:"",country:"HT",operator_id:"",amount:0})),[]),N=(0,u.mN)({resolver:(0,x.t)(B),defaultValues:R}),q=(0,y.wA)(),M=(0,w.A)(),{reset:T,watch:$,setError:L,setValue:P,handleSubmit:E,formState:{isSubmitting:W}}=N,z=$(),{countries:G,operator_set:U,fx_rate:V,loading_operator:O}=(0,y.d4)((e=>e.sendtopup));return(0,t.useEffect)((()=>{q((0,b.oj)())}),[q]),(0,S.jsx)(j.Op,{methods:N,onSubmit:E((async()=>{try{const e=await(0,b.Nt)(z);T(),a(n("success.CREATE")),q((0,b.$V)()),o(s.nB.ticket.view(null===e||void 0===e?void 0:e.id))}catch(i){const o=(0,C.A)(i);var e,r,t,l;if(a(n(`error.${o}`),{variant:"error"}),M.current)if(null!==(e=i.response)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.phone)L("phone",{...i,message:null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.phone})}finally{q((0,b.xv)()),N.clearErrors("afterSubmit")}})),children:(0,S.jsx)(m.Ay,{container:!0,spacing:3,children:(0,S.jsx)(m.Ay,{item:!0,xs:12,md:8,children:(0,S.jsxs)(f.A,{sx:{p:3},children:[(0,S.jsxs)(v.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,S.jsxs)(j.tX,{name:"country",label:n("field.country"),placeholder:n("field.country"),children:[(0,S.jsx)("option",{value:""}),null===G||void 0===G||null===(e=G.countries)||void 0===e?void 0:e.map((e=>(0,S.jsx)("option",{value:e.isoName,children:e.name},e.isoName)))]}),(0,S.jsx)(j.nU,{name:"phone",label:n("field.phone"),onBlur:async()=>{try{var e;q((0,b.vL)());const r=await(0,b.zB)(null===z||void 0===z?void 0:z.phone,null===z||void 0===z?void 0:z.country);q((0,b.Cl)(null===r||void 0===r?void 0:r.operator)),P("operator_id",null===r||void 0===r||null===(e=r.operator)||void 0===e?void 0:e.operatorId)}catch(t){var r;if(q((0,b.xv)()),"FOUND"===(null===(r=t.response.data)||void 0===r?void 0:r.found)){var o;i(!0),_(null===(o=t.response.data)||void 0===o?void 0:o.operators)}else{const e=(0,C.A)(t);a(e,{variant:"error"})}}}})]}),(0,S.jsxs)(m.Ay,{item:!0,xs:12,sx:{py:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[l&&(0,S.jsx)(v.A,{display:"flex",flexWrap:"wrap",gap:2,children:I.map((e=>{var r;return(0,S.jsxs)(f.A,{onClick:()=>{P("operator_id",e.operatorId),q((0,b.Cl)(e))},sx:{cursor:"pointer",border:(null===z||void 0===z?void 0:z.operator_id)===e.operatorId?"2px solid #007bff":"1px solid #ddd",p:2},children:[(0,S.jsx)("img",{src:null===(r=e.logoUrls)||void 0===r?void 0:r[0],alt:e.name,style:{width:"80px",height:"auto",objectFit:"contain"}}),(0,S.jsx)(v.A,{mt:1,children:e.name})]},e.operatorId)}))}),!l&&U&&(0,S.jsxs)(f.A,{sx:{cursor:"pointer",border:"2px solid #007bff",p:2},children:[(0,S.jsx)("img",{src:null===(r=U.logoUrls)||void 0===r?void 0:r[0],alt:U.name,style:{width:"80px",height:"auto",objectFit:"contain"}}),(0,S.jsx)(v.A,{mt:1,children:U.name})]})]}),(0,S.jsxs)(v.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,S.jsx)(j.o3,{name:"amount",label:`${n("field.montant")} USD`,onBlur:async()=>{try{q((0,b.vL)());const e=await(0,b.VQ)(null===z||void 0===z?void 0:z.amount,null===U||void 0===U?void 0:U.operatorId);q((0,b._5)(null===e||void 0===e?void 0:e.rate))}catch(e){q((0,b.xv)());const r=(0,C.A)(e);a(r,{variant:"error"})}}}),(0,S.jsxs)(v.A,{sx:{backgroundColor:"#007bff",borderRadius:.8},children:[(0,S.jsx)(g.A,{sx:{pl:1},children:"Total:"}),(0,S.jsxs)(g.A,{variant:"h5",sx:{pl:1,color:"white",fontWeight:"700"},children:[(null===V||void 0===V?void 0:V.fxRate)||0," ",null===V||void 0===V?void 0:V.currencyCode]})]})]}),(0,S.jsx)(A.A,{alignItems:"flex-end",sx:{mt:3},children:(0,S.jsx)(h.A,{type:"submit",variant:"contained",loading:W||O,children:n("p_sendtopup.sendtopup")})})]})})})})}function _(){const{themeStretch:e}=(0,a.A)(),{t:r}=(0,k.B)();return(0,S.jsx)(l.A,{title:`Configuration: ${r("p_sendtopup.sendtopup")}`,children:(0,S.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,S.jsx)(i.A,{heading:r("p_sendtopup.sendtopup"),links:[{name:r("params.dashboard"),href:s.nB.root},{name:r("p_sendtopup.sendtopup")}]}),(0,S.jsx)(I,{})]})})}},50716:(e,r,o)=>{o.d(r,{A:()=>t});const t=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}}}]);
//# sourceMappingURL=1132.5f624331.chunk.js.map