"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[4666],{18456:(e,r,o)=>{o.d(r,{Z:()=>x});var t=o(26769),n=o.n(t),a=o(697),s=o(20890),l=o(50533),i=o(11087),d=o(93517),c=o(80184);function p(e){let{links:r,activeLast:o=!1,...t}=e;const n=r[r.length-1].name,l=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==n?(0,c.jsx)(u,{link:e}):(0,c.jsx)(s.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:n})},e.name)));return(0,c.jsx)(d.Z,{separator:(0,c.jsx)(a.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...t,children:o?l:i})}function u(e){let{link:r}=e;const{href:o,name:t,icon:n}=r;return(0,c.jsxs)(l.Z,{variant:"body2",component:i.rU,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[n&&(0,c.jsx)(a.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:n}),t]},t)}function x(e){let{links:r,action:o,heading:t,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(a.Z,{sx:{mb:5,...d},children:[(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(a.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(s.Z,{variant:"h4",gutterBottom:!0,children:t}),(0,c.jsx)(p,{links:r,...u})]}),o&&(0,c.jsx)(a.Z,{sx:{flexShrink:0},children:o})]}),(0,c.jsx)(a.Z,{sx:{mt:2},children:n()(i)?(0,c.jsx)(l.Z,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(l.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},84666:(e,r,o)=>{o.r(r),o.d(r,{default:()=>_});var t=o(72791),n=o(89164),a=o(38072),s=o(85703),l=o(25212),i=o(18456),d=o(81724),c=o(35345),p=o(57689),u=o(61134),x=o(44695),h=o(39709),m=o(61889),f=o(57621),v=o(697),g=o(20890),Z=o(36314),j=o(2190),b=o(61069),y=o(28047),w=o(22175),C=o(67330),S=o(33168),k=o(80184);function I(){var e,r;const o=(0,p.s0)(),{t:n}=(0,S.$)(),{enqueueSnackbar:s}=(0,c.Ds)(),[l,i]=(0,t.useState)(!1),[I,_]=(0,t.useState)([]),R=d.Ry().shape({phone:d.Z_().required(n("field.required",{obj:n("field.phone")})),country:d.Z_().required(n("field.required",{obj:n("field.country")})),operator_id:d.Rx().required(n("field.required",{obj:n("field.operator")})),amount:d.Rx().required(n("field.required",{obj:n("field.amount")}))}),P=(0,t.useMemo)((()=>({phone:"",country:"HT",operator_id:"",amount:0})),[]),B=(0,u.cI)({resolver:(0,x.X)(R),defaultValues:P}),A=(0,b.I0)(),q=(0,w.Z)(),{reset:M,watch:N,setError:T,setValue:E,handleSubmit:V,formState:{isSubmitting:W}}=B,F=N(),{countries:G,operator_set:U,fx_rate:z,loading_operator:D}=(0,b.v9)((e=>e.sendtopup));return(0,t.useEffect)((()=>{A((0,y.v9)())}),[A]),(0,k.jsx)(j.RV,{methods:B,onSubmit:V((async()=>{try{const e=await(0,y.bk)(F);M(),s(n("success.CREATE")),A((0,y.oA)()),o(a.vB.ticket.view(null===e||void 0===e?void 0:e.id))}catch(i){const o=(0,C.Z)(i);var e,r,t,l;if(s(n("error.".concat(o)),{variant:"error"}),q.current)if(null!==(e=i.response)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.phone)T("phone",{...i,message:null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.phone})}finally{A((0,y.Vg)()),B.clearErrors("afterSubmit")}})),children:(0,k.jsx)(m.ZP,{container:!0,spacing:3,children:(0,k.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,k.jsxs)(f.Z,{sx:{p:3},children:[(0,k.jsxs)(v.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,k.jsxs)(j.Cc,{name:"country",label:n("field.country"),placeholder:n("field.country"),children:[(0,k.jsx)("option",{value:""}),null===G||void 0===G||null===(e=G.countries)||void 0===e?void 0:e.map((e=>(0,k.jsx)("option",{value:e.isoName,children:e.name},e.isoName)))]}),(0,k.jsx)(j.PC,{name:"phone",label:n("field.phone"),onBlur:async()=>{try{var e;A((0,y.Av)());const r=await(0,y.bE)(null===F||void 0===F?void 0:F.phone,null===F||void 0===F?void 0:F.country);A((0,y.FS)(null===r||void 0===r?void 0:r.operator)),E("operator_id",null===r||void 0===r||null===(e=r.operator)||void 0===e?void 0:e.operatorId)}catch(t){var r;if(A((0,y.Vg)()),"FOUND"===(null===(r=t.response.data)||void 0===r?void 0:r.found)){var o;i(!0),_(null===(o=t.response.data)||void 0===o?void 0:o.operators)}else{const e=(0,C.Z)(t);s(e,{variant:"error"})}}}})]}),(0,k.jsxs)(m.ZP,{item:!0,xs:12,sx:{py:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[l&&(0,k.jsx)(v.Z,{display:"flex",flexWrap:"wrap",gap:2,children:I.map((e=>{var r;return(0,k.jsxs)(f.Z,{onClick:()=>{E("operator_id",e.operatorId),A((0,y.FS)(e))},sx:{cursor:"pointer",border:(null===F||void 0===F?void 0:F.operator_id)===e.operatorId?"2px solid #007bff":"1px solid #ddd",p:2},children:[(0,k.jsx)("img",{src:null===(r=e.logoUrls)||void 0===r?void 0:r[0],alt:e.name,style:{width:"80px",height:"auto",objectFit:"contain"}}),(0,k.jsx)(v.Z,{mt:1,children:e.name})]},e.operatorId)}))}),!l&&U&&(0,k.jsxs)(f.Z,{sx:{cursor:"pointer",border:"2px solid #007bff",p:2},children:[(0,k.jsx)("img",{src:null===(r=U.logoUrls)||void 0===r?void 0:r[0],alt:U.name,style:{width:"80px",height:"auto",objectFit:"contain"}}),(0,k.jsx)(v.Z,{mt:1,children:U.name})]})]}),(0,k.jsxs)(v.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,k.jsx)(j.au,{name:"amount",label:"".concat(n("field.montant")," USD"),onBlur:async()=>{try{A((0,y.Av)());const e=await(0,y.r$)(null===F||void 0===F?void 0:F.amount,null===U||void 0===U?void 0:U.operatorId);A((0,y.no)(null===e||void 0===e?void 0:e.rate))}catch(e){A((0,y.Vg)());const r=(0,C.Z)(e);s(r,{variant:"error"})}}}),(0,k.jsxs)(v.Z,{sx:{backgroundColor:"#007bff",borderRadius:.8},children:[(0,k.jsx)(g.Z,{sx:{pl:1},children:"Total:"}),(0,k.jsxs)(g.Z,{variant:"h5",sx:{pl:1,color:"white",fontWeight:"700"},children:[(null===z||void 0===z?void 0:z.fxRate)||0," ",null===z||void 0===z?void 0:z.currencyCode]})]})]}),(0,k.jsx)(Z.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,k.jsx)(h.Z,{type:"submit",variant:"contained",loading:W||D,children:n("p_sendtopup.sendtopup")})})]})})})})}function _(){const{themeStretch:e}=(0,s.Z)(),{t:r}=(0,S.$)();return(0,k.jsx)(l.Z,{title:"Configuration: ".concat(r("p_sendtopup.sendtopup")),children:(0,k.jsxs)(n.Z,{maxWidth:!e&&"lg",children:[(0,k.jsx)(i.Z,{heading:r("p_sendtopup.sendtopup"),links:[{name:r("params.dashboard"),href:a.vB.root},{name:r("p_sendtopup.sendtopup")}]}),(0,k.jsx)(I,{})]})})}},67330:(e,r,o)=>{o.d(r,{Z:()=>t});const t=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},93517:(e,r,o)=>{o.d(r,{Z:()=>P});var t=o(87462),n=o(63366),a=o(72791),s=(o(57441),o(63733)),l=o(94419),i=o(40536),d=o(66934),c=o(31402),p=o(20890),u=o(12065),x=o(74223),h=o(80184);const m=(0,x.Z)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var f=o(95080);const v=["slots","slotProps"],g=(0,d.ZP)(f.Z)((e=>{let{theme:r}=e;return(0,t.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,t.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,t.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(r.palette.grey[600],.12)})})})),Z=(0,d.ZP)(m)({width:24,height:16});const j=function(e){const{slots:r={},slotProps:o={}}=e,a=(0,n.Z)(e,v),s=e;return(0,h.jsx)("li",{children:(0,h.jsx)(g,(0,t.Z)({focusRipple:!0},a,{ownerState:s,children:(0,h.jsx)(Z,(0,t.Z)({as:r.CollapsedIcon,ownerState:s},o.collapsedIcon))}))})};var b=o(75878),y=o(21217);function w(e){return(0,y.Z)("MuiBreadcrumbs",e)}const C=(0,b.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.ZP)(p.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{["& .".concat(C.li)]:r.li},r.root]})({}),I=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),_=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,r,o,t){return e.reduce(((n,a,s)=>(s<e.length-1?n=n.concat(a,(0,h.jsx)(_,{"aria-hidden":!0,className:r,ownerState:t,children:o},"separator-".concat(s))):n.push(a),n)),[])}const P=a.forwardRef((function(e,r){const o=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:x={},slotProps:m={},expandText:f="Show path",itemsAfterCollapse:v=1,itemsBeforeCollapse:g=1,maxItems:Z=8,separator:b="/"}=o,y=(0,n.Z)(o,S),[C,_]=a.useState(!1),P=(0,t.Z)({},o,{component:u,expanded:C,expandText:f,itemsAfterCollapse:v,itemsBeforeCollapse:g,maxItems:Z,separator:b}),B=(e=>{const{classes:r}=e;return(0,l.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,r)})(P),A=(0,i.y)({elementType:x.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:P}),q=a.useRef(null),M=a.Children.toArray(d).filter((e=>a.isValidElement(e))).map(((e,r)=>(0,h.jsx)("li",{className:B.li,children:e},"child-".concat(r))));return(0,h.jsx)(k,(0,t.Z)({ref:r,component:u,color:"text.secondary",className:(0,s.Z)(B.root,p),ownerState:P},y,{children:(0,h.jsx)(I,{className:B.ol,ref:q,ownerState:P,children:R(C||Z&&M.length<=Z?M:(e=>g+v>=e.length?e:[...e.slice(0,g),(0,h.jsx)(j,{"aria-label":f,slots:{CollapsedIcon:x.CollapsedIcon},slotProps:{collapsedIcon:A},onClick:()=>{_(!0);const e=q.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-v,e.length)])(M),B.separator,b,P)})}))}))}}]);
//# sourceMappingURL=4666.2d70fcb3.chunk.js.map