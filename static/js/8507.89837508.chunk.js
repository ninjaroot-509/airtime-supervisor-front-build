"use strict";(self.webpackChunkbling_supervisor=self.webpackChunkbling_supervisor||[]).push([[8507],{18507:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(65043),a=n(58956),o=n(73216),s=n(19252),i=n(48407),l=n(65384),c=n(11737),d=n(13937),m=n(19838),u=n(24753),p=n(73033),f=n(24858),x=n(18403),h=n(72812),g=n(68903),A=n(12110),b=n(96446),y=n(85865),v=n(88911),j=n(53335),_=n(34866),w=n(50716),k=n(49092),S=n(70579);function C(e){let{isEdit:t,currentFee:n}=e;const s=(0,o.Zp)(),{t:c}=(0,k.B)(),{enqueueSnackbar:m}=(0,a.dh)(),u=p.Ik().shape({type_transaction:p.Yj().required(c("field.required",{obj:c("field.type_transaction")})),minimum_amount:p.Yj().required(c("field.required",{obj:c("field.minimum_amount")})),maximum_amount:p.ai().required(c("field.required",{obj:c("field.maximum_amount")})),fee_amount:p.ai().required(c("field.required",{obj:c("field.fee_amount")}))}),C=(0,r.useMemo)((()=>({type_transaction:(null===n||void 0===n?void 0:n.type_transaction)||"",minimum_amount:(null===n||void 0===n?void 0:n.minimum_amount)||0,maximum_amount:(null===n||void 0===n?void 0:n.maximum_amount)||0,fee_amount:(null===n||void 0===n?void 0:n.fee_amount)||0,is_percent:(null===n||void 0===n?void 0:n.is_percent)||!0,description:(null===n||void 0===n?void 0:n.description)||"",keyId:(null===n||void 0===n?void 0:n.id)||-1})),[n]),B=(0,f.mN)({resolver:(0,x.t)(u),defaultValues:C}),I=(0,l.wA)(),{reset:R,watch:q,control:E,setValue:P,handleSubmit:$,formState:{isSubmitting:M}}=B,N=q();(0,r.useEffect)((()=>{t&&n&&R(C),t||R(C)}),[t,n]);const{typetransactions:T}=(0,l.d4)((e=>e.generale));return(0,r.useEffect)((()=>{I((0,_.at)())}),[I]),(0,S.jsx)(j.Op,{methods:B,onSubmit:$((async()=>{try{if(t){const e=await(0,d.gH)(N);I((0,d.Hc)(e))}else{const e=await(0,d.aA)(N);I((0,d.B7)(e))}R(),m(c(t?"success.UPDATED":"success.CREATE")),s(i.nB.configuration.fee)}catch(e){console.error(e);const t=(0,w.A)(e);m(c(`error.${t}`),{variant:"error"})}})),children:(0,S.jsx)(g.Ay,{container:!0,spacing:3,children:(0,S.jsx)(g.Ay,{item:!0,xs:12,md:8,children:(0,S.jsxs)(A.A,{sx:{p:3},children:[(0,S.jsxs)(b.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,S.jsxs)(j.tX,{name:"type_transaction",label:c("field.type_transaction"),placeholder:c("field.type_transaction"),disabled:!0,value:"DEPOSIT",children:[(0,S.jsx)("option",{value:""}),null===T||void 0===T?void 0:T.map((e=>(0,S.jsx)("option",{value:e,children:c(`type_transaction.${e}`)},e)))]}),(0,S.jsx)(j.o3,{name:"minimum_amount",label:c("field.minimum_amount")}),(0,S.jsx)(j.o3,{name:"maximum_amount",label:c("field.maximum_amount")}),(0,S.jsx)(j.o3,{name:"fee_amount",label:c("field.fee_amount")}),(0,S.jsx)(j.o3,{name:"description",multiline:!0,rows:4,label:"Description"}),(0,S.jsx)(j.b8,{name:"is_percent",labelPlacement:"start",label:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:"Percent"}),(0,S.jsx)(y.A,{variant:"body2",sx:{color:"text.secondary"},children:"Enabling this will automatically make the fee amount to percentage"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}})]}),(0,S.jsx)(v.A,{alignItems:"flex-end",sx:{mt:3},children:(0,S.jsx)(h.A,{type:"submit",variant:"contained",loading:M,children:t?c("params.save_change"):c("params.create",{obj:c("p_fee.fee")})})})]})})})})}function B(){const{themeStretch:e}=(0,c.A)(),{t:t}=(0,k.B)(),n=(0,o.Zp)(),p=(0,l.wA)(),{enqueueSnackbar:f}=(0,a.dh)(),{pathname:x}=(0,o.zy)(),{feeKey:h=""}=(0,o.g)(),g=x.includes("edit"),[A,b]=(0,r.useState)(null);(0,r.useEffect)((()=>{g&&y()}),[h]);const y=async()=>{try{const e=await(0,d.Xf)(Number(h));b(e),p((0,d.mh)())}catch(e){console.error(e);const t=(0,w.A)(e);f(t,{variant:"error"}),n(i.nB.configuration.fee)}};return(0,S.jsx)(m.A,{title:`Configuration: ${t(g?"p_fee.edit_fee":"p_fee.new_fee")}`,children:(0,S.jsxs)(s.A,{maxWidth:!e&&"lg",children:[(0,S.jsx)(u.A,{heading:t(g?"p_fee.edit_fee":"p_fee.new_fee"),links:[{name:t("params.dashboard"),href:i.nB.root},{name:t("params.configuration"),href:i.nB.configuration.root},{name:g?`${t("p_fee.fee")} ${null===A||void 0===A?void 0:A.type_transaction_name}`:t("p_fee.new_fee")}]}),(0,S.jsx)(C,{isEdit:g,currentFee:A})]})})}},22698:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(58168),a=n(98587),o=n(65043),s=(n(2086),n(69292)),i=n(98610),l=n(32463),c=n(34535),d=n(72876),m=n(85865),u=n(84794),p=n(66734),f=n(70579);const x=(0,p.A)((0,f.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=n(75429);const g=["slots","slotProps"],A=(0,c.Ay)(h.A)((e=>{let{theme:t}=e;return(0,r.A)({display:"flex",marginLeft:`calc(${t.spacing(1)} * 0.5)`,marginRight:`calc(${t.spacing(1)} * 0.5)`},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,r.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,r.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,u.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(t.palette.grey[600],.12)})})})),b=(0,c.Ay)(x)({width:24,height:16});const y=function(e){const{slots:t={},slotProps:n={}}=e,o=(0,a.A)(e,g),s=e;return(0,f.jsx)("li",{children:(0,f.jsx)(A,(0,r.A)({focusRipple:!0},o,{ownerState:s,children:(0,f.jsx)(b,(0,r.A)({as:t.CollapsedIcon,ownerState:s},n.collapsedIcon))}))})};var v=n(92532),j=n(72372);function _(e){return(0,j.Ay)("MuiBreadcrumbs",e)}const w=(0,v.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,c.Ay)(m.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${w.li}`]:t.li},t.root]})({}),C=(0,c.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),B=(0,c.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,t,n,r){return e.reduce(((a,o,s)=>(s<e.length-1?a=a.concat(o,(0,f.jsx)(B,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${s}`)):a.push(o),a)),[])}const R=o.forwardRef((function(e,t){const n=(0,d.A)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:m,component:u="nav",slots:p={},slotProps:x={},expandText:h="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:A=1,maxItems:b=8,separator:v="/"}=n,j=(0,a.A)(n,k),[w,B]=o.useState(!1),R=(0,r.A)({},n,{component:u,expanded:w,expandText:h,itemsAfterCollapse:g,itemsBeforeCollapse:A,maxItems:b,separator:v}),q=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,t)})(R),E=(0,l.Q)({elementType:p.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:R}),P=o.useRef(null),$=o.Children.toArray(c).filter((e=>o.isValidElement(e))).map(((e,t)=>(0,f.jsx)("li",{className:q.li,children:e},`child-${t}`)));return(0,f.jsx)(S,(0,r.A)({ref:t,component:u,color:"text.secondary",className:(0,s.A)(q.root,m),ownerState:R},j,{children:(0,f.jsx)(C,{className:q.ol,ref:P,ownerState:R,children:I(w||b&&$.length<=b?$:(e=>A+g>=e.length?e:[...e.slice(0,A),(0,f.jsx)(y,{"aria-label":h,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:E},onClick:()=>{B(!0);const e=P.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])($),q.separator,v,R)})}))}))},24753:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(90620),a=n.n(r),o=n(96446),s=n(85865),i=n(88446),l=n(35475),c=n(22698),d=n(70579);function m(e){let{links:t,activeLast:n=!1,...r}=e;const a=t[t.length-1].name,i=t.map((e=>(0,d.jsx)(u,{link:e},e.name))),l=t.map((e=>(0,d.jsx)("div",{children:e.name!==a?(0,d.jsx)(u,{link:e}):(0,d.jsx)(s.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:a})},e.name)));return(0,d.jsx)(c.A,{separator:(0,d.jsx)(o.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...r,children:n?i:l})}function u(e){let{link:t}=e;const{href:n,name:r,icon:a}=t;return(0,d.jsxs)(i.A,{variant:"body2",component:l.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,d.jsx)(o.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),r]},r)}function p(e){let{links:t,action:n,heading:r,moreLink:l=[],sx:c,...u}=e;return(0,d.jsxs)(o.A,{sx:{mb:5,...c},children:[(0,d.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,d.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:r}),(0,d.jsx)(m,{links:t,...u})]}),n&&(0,d.jsx)(o.A,{sx:{flexShrink:0},children:n})]}),(0,d.jsx)(o.A,{sx:{mt:2},children:a()(l)?(0,d.jsx)(i.A,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,d.jsx)(i.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},50716:(e,t,n)=>{n.d(t,{A:()=>r});const r=e=>{var t;if(null!==(t=e.response)&&void 0!==t&&t.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}}}]);
//# sourceMappingURL=8507.89837508.chunk.js.map