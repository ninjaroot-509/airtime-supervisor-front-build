"use strict";(self.webpackChunkbling=self.webpackChunkbling||[]).push([[499],{18456:(e,r,n)=>{n.d(r,{Z:()=>m});var o=n(26769),a=n.n(o),s=n(697),l=n(20890),i=n(50533),t=n(11087),d=n(93517),c=n(80184);function p(e){let{links:r,activeLast:n=!1,...o}=e;const a=r[r.length-1].name,i=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),t=r.map((e=>(0,c.jsx)("div",{children:e.name!==a?(0,c.jsx)(u,{link:e}):(0,c.jsx)(l.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:a})},e.name)));return(0,c.jsx)(d.Z,{separator:(0,c.jsx)(s.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:n?i:t})}function u(e){let{link:r}=e;const{href:n,name:o,icon:a}=r;return(0,c.jsxs)(i.Z,{variant:"body2",component:t.rU,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,c.jsx)(s.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),o]},o)}function m(e){let{links:r,action:n,heading:o,moreLink:t=[],sx:d,...u}=e;return(0,c.jsxs)(s.Z,{sx:{mb:5,...d},children:[(0,c.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(l.Z,{variant:"h4",gutterBottom:!0,children:o}),(0,c.jsx)(p,{links:r,...u})]}),n&&(0,c.jsx)(s.Z,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(s.Z,{sx:{mt:2},children:a()(t)?(0,c.jsx)(i.Z,{href:t,target:"_blank",rel:"noopener",variant:"body2",children:t}):t.map((e=>(0,c.jsx)(i.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},30932:(e,r,n)=>{n.r(r),n.d(r,{default:()=>B});var o=n(72791),a=n(35345),s=n(57689),l=n(89164),i=n(38072),t=n(61069),d=n(85703),c=n(46772),p=n(4709),u=n(25212),m=n(18456),v=n(81724),x=n(61134),h=n(44695),f=n(39709),b=n(61889),g=n(57621),j=n(697),y=n(20890),Z=n(36314),_=n(7870),w=n(22654),k=n(41758),C=(n(53026),n(2190)),q=n(98226),S=n(22175),I=n(67330),M=n(33168),R=n(80184);function P(e){var r;let{isEdit:n,currentAgent:l}=e;const d=(0,s.s0)(),{t:p}=(0,M.$)(),{enqueueSnackbar:u}=(0,a.Ds)(),m=(v.Ry().shape({type_id:v.Z_().required(p("field.required",{obj:p("field.type_id")})),number_id:v.Z_().required(p("field.required",{obj:p("field.number_id")})),created_on:v.Z_().required(p("field.required",{obj:p("field.created_on")})),expired_on:v.Z_().required(p("field.required",{obj:p("field.expired_on")}))}),v.Ry().shape({phone:v.Z_().required(p("field.required",{obj:p("field.phone")})),first_name:v.Z_().required(p("field.required",{obj:p("field.first_name")})),last_name:v.Z_().required(p("field.required",{obj:p("field.last_name")})),country:v.Z_().required(p("field.required",{obj:p("field.country")})),city:v.Z_().required(p("field.required",{obj:p("field.city")})),address:v.Z_().required(p("field.required",{obj:p("field.address")})),percent:v.Rx().required(p("field.required",{obj:p("field.percent")})),serie:v.Rx().required(p("field.required",{obj:p("field.serie")}))})),P=(0,o.useMemo)((()=>({username:(null===l||void 0===l?void 0:l.username)||"",email:(null===l||void 0===l?void 0:l.email)||"",phone:(null===l||void 0===l?void 0:l.phone)||"",first_name:(null===l||void 0===l?void 0:l.first_name)||"",last_name:(null===l||void 0===l?void 0:l.last_name)||"",photo:(null===l||void 0===l?void 0:l.photo)||null,country:(null===l||void 0===l?void 0:l.country)||"",city:(null===l||void 0===l?void 0:l.city)||"",address:(null===l||void 0===l?void 0:l.address)||"",born_date:(0,w.Q$)((null===l||void 0===l?void 0:l.born_date)||new Date),is_block:(null===l||void 0===l?void 0:l.is_block)||!1,genre:(null===l||void 0===l?void 0:l.genre)||"",marital:(null===l||void 0===l?void 0:l.marital)||"",description:(null===l||void 0===l?void 0:l.description)||"",percent:(null===l||void 0===l?void 0:l.percent)||0,serie:(null===l||void 0===l?void 0:l.serie)||0,supervisor:(null===l||void 0===l?void 0:l.supervisor)||null,password:null,keyId:(null===l||void 0===l?void 0:l.uid)||-1})),[l]),B=(0,x.cI)({resolver:(0,h.X)(m),defaultValues:P}),A=(0,t.I0)(),D=(0,S.Z)(),{reset:E,watch:T,control:z,setError:L,setValue:N,handleSubmit:O,formState:{isSubmitting:$}}=B,H=T(),[U,V]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n&&l&&E(P),n||E(P)}),[n,l]);const{countries:W,genres:G,maritals:Q,usertypeids:F}=(0,t.v9)((e=>e.generale)),{selectsupervisors:J}=(0,t.v9)((e=>e.supervisor));(0,o.useEffect)((()=>{A((0,q.JZ)()),A((0,q.d)()),A((0,q.ox)()),A((0,q.rf)())}),[A]);const X=(0,o.useCallback)((e=>{const r=e[0];r&&N("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),V(!0)}),[N]),{fields:K,append:Y,remove:ee}=(0,x.Dq)({control:z,name:"user_pieces_ids"});return(0,R.jsx)(C.RV,{methods:B,onSubmit:O((async()=>{try{const e=new FormData;if(Object.entries(H).forEach((r=>{let[n,o]=r;["photo","percent","serie","keyId","supervisor"].includes(n)||("born_date"===n?e.append(n,(0,w.Q$)(o)):e.append(n,o))})),U&&e.append("photo",H.photo),e.append("percent",H.percent),e.append("serie",H.serie),H.supervisor&&e.append("supervisor",H.supervisor),e.append("keyId",H.keyId),n){const r=await(0,c.sE)(e);A((0,c.ci)(r))}else{const r=await(0,c.o0)(e);A((0,c.ud)(r))}V(!1),E(),u(p(n?"success.UPDATED":"success.CREATE")),d(i.vB.agent.list)}catch(q){console.error(q);const n=(0,I.Z)(q);if(u(p("error.".concat(n)),{variant:"error"}),D.current){var e,r,o,a,s,l,t,m,v,x,h,f,b,g,j,y,Z,_,k,C;if(null!==(e=q.response)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.phone)L("phone",{...q,message:null===(h=q.response)||void 0===h||null===(f=h.data)||void 0===f?void 0:f.phone});if(null!==(o=q.response)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.born_date)L("born_date",{...q,message:null===(b=q.response)||void 0===b||null===(g=b.data)||void 0===g?void 0:g.born_date});if(null!==(s=q.response)&&void 0!==s&&null!==(l=s.data)&&void 0!==l&&l.username)L("username",{...q,message:null===(j=q.response)||void 0===j||null===(y=j.data)||void 0===y?void 0:y.username});if(q.response.data.email?L("email",{...q,message:q.response.data.email}):q.response.data.non_field_errors&&L("email",{...q,message:q.response.data.non_field_errors}),null!==(t=q.response)&&void 0!==t&&null!==(m=t.data)&&void 0!==m&&m.supervisor)L("supervisor",{...q,message:null===(Z=q.response)||void 0===Z||null===(_=Z.data)||void 0===_?void 0:_.supervisor});if(null!==(v=q.response)&&void 0!==v&&null!==(x=v.data)&&void 0!==x&&x.photo)L("photo",{...q,message:null===(k=q.response)||void 0===k||null===(C=k.data)||void 0===C?void 0:C.photo})}}})),children:(0,R.jsxs)(b.ZP,{container:!0,spacing:3,children:[(0,R.jsx)(b.ZP,{item:!0,xs:12,md:4,children:(0,R.jsxs)(g.Z,{sx:{py:10,px:3},children:[n&&(0,R.jsx)(k.Z,{color:H.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:H.is_block?"Banned":"Active"}),(0,R.jsx)(j.Z,{sx:{mb:5},children:(0,R.jsx)(C.sX,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:X,helperText:(0,R.jsxs)(y.Z,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,R.jsx)("br",{})," max size of ",(0,_.oe)(3145728)]})})}),n&&(0,R.jsx)(C._e,{name:"is_block",labelPlacement:"start",label:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.Z,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,R.jsx)(y.Z,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,R.jsx)(b.ZP,{item:!0,xs:12,md:8,children:(0,R.jsxs)(g.Z,{sx:{p:3},children:[(0,R.jsxs)(j.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,R.jsxs)(C.Cc,{name:"supervisor",label:p("field.supervisor"),placeholder:p("field.supervisor"),children:[(0,R.jsx)("option",{value:""}),null===J||void 0===J||null===(r=J.data)||void 0===r?void 0:r.map((e=>(0,R.jsx)("option",{value:e.uid,children:e.full_name},e.uid)))]}),(0,R.jsx)(C.au,{type:"email",name:"email",label:p("field.email")}),(0,R.jsx)(C.PC,{name:"phone",label:p("field.phone")}),(0,R.jsx)(C.au,{name:"first_name",label:p("field.first_name")}),(0,R.jsx)(C.au,{name:"last_name",label:p("field.last_name")}),(0,R.jsx)(C.T$,{name:"born_date",maxDate:new Date,label:p("field.born_date")}),(0,R.jsxs)(C.Cc,{name:"genre",label:p("field.genre"),placeholder:p("field.genre"),children:[(0,R.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map((e=>(0,R.jsx)("option",{value:e,children:p("genre.".concat(e))},e)))]}),(0,R.jsxs)(C.Cc,{name:"marital",label:p("field.marital"),placeholder:p("field.marital"),children:[(0,R.jsx)("option",{value:""}),null===Q||void 0===Q?void 0:Q.map((e=>(0,R.jsx)("option",{value:e,children:p("marital.".concat(e))},e)))]}),(0,R.jsxs)(C.Cc,{name:"country",label:p("field.country"),placeholder:p("field.country"),children:[(0,R.jsx)("option",{value:""}),null===W||void 0===W?void 0:W.map((e=>(0,R.jsx)("option",{value:e.id,children:p("country.".concat(e.name))},e.id)))]}),(0,R.jsx)(C.au,{name:"city",label:p("field.city")}),(0,R.jsx)(C.au,{name:"address",label:p("field.address")}),(0,R.jsx)(C.au,{name:"percent",label:p("field.percent")}),(0,R.jsx)(C.au,{name:"serie",label:p("field.serie")}),(0,R.jsx)(C.au,{name:"password",label:p("field.password")}),(0,R.jsx)(C.au,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,R.jsx)(Z.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,R.jsx)(f.Z,{type:"submit",variant:"contained",loading:$,children:n?p("params.save_change"):p("params.create",{obj:p("p_vendor.vendor")})})})]})})]})})}function B(){const{themeStretch:e}=(0,d.Z)(),{t:r}=(0,M.$)(),n=(0,s.s0)(),v=(0,t.I0)(),{enqueueSnackbar:x}=(0,a.Ds)(),{pathname:h}=(0,s.TH)(),{agentKey:f=""}=(0,s.UO)(),b=h.includes("edit"),[g,j]=(0,o.useState)(null);(0,o.useEffect)((()=>{b&&y(),v((0,p.DJ)()),v((0,c.j8)(1,1))}),[f]);const y=async()=>{try{const e=await(0,c.yB)(f);j(e)}catch(e){console.error(e);const r=(0,I.Z)(e);x(r,{variant:"error"}),n(i.vB.agent.agent)}};return(0,R.jsx)(u.Z,{title:"Configuration: ".concat(r(b?"p_vendor.edit_vendor":"p_vendor.new_vendor")),children:(0,R.jsxs)(l.Z,{maxWidth:!e&&"lg",children:[(0,R.jsx)(m.Z,{heading:r(b?"p_vendor.edit_vendor":"p_vendor.new_vendor"),links:[{name:r("params.dashboard"),href:i.vB.root},{name:r("p_vendor.vendor"),href:i.vB.agent.root},{name:b?"".concat(r("p_vendor.vendor")," ").concat(null===g||void 0===g?void 0:g.full_name):r("p_vendor.new_vendor")}]}),(0,R.jsx)(P,{isEdit:b,currentAgent:g})]})})}},67330:(e,r,n)=>{n.d(r,{Z:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},22654:(e,r,n)=>{n.d(r,{Mu:()=>s,Q$:()=>a,zM:()=>l});var o=n(16386);function a(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.Z)(new Date(e),r)}function s(e){return(0,o.Z)(new Date(e),"dd MMMM yyyy")}function l(e){return(0,o.Z)(new Date(e),"dd MMM yyyy HH:mm")}},93517:(e,r,n)=>{n.d(r,{Z:()=>M});var o=n(87462),a=n(63366),s=n(72791),l=(n(57441),n(63733)),i=n(94419),t=n(40536),d=n(66934),c=n(31402),p=n(20890),u=n(12065),m=n(74223),v=n(80184);const x=(0,m.Z)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=n(95080);const f=["slots","slotProps"],b=(0,d.ZP)(h.Z)((e=>{let{theme:r}=e;return(0,o.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(r.palette.grey[600],.12)})})})),g=(0,d.ZP)(x)({width:24,height:16});const j=function(e){const{slots:r={},slotProps:n={}}=e,s=(0,a.Z)(e,f),l=e;return(0,v.jsx)("li",{children:(0,v.jsx)(b,(0,o.Z)({focusRipple:!0},s,{ownerState:l,children:(0,v.jsx)(g,(0,o.Z)({as:r.CollapsedIcon,ownerState:l},n.collapsedIcon))}))})};var y=n(75878),Z=n(21217);function _(e){return(0,Z.Z)("MuiBreadcrumbs",e)}const w=(0,y.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.ZP)(p.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{["& .".concat(w.li)]:r.li},r.root]})({}),q=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,r,n,o){return e.reduce(((a,s,l)=>(l<e.length-1?a=a.concat(s,(0,v.jsx)(S,{"aria-hidden":!0,className:r,ownerState:o,children:n},"separator-".concat(l))):a.push(s),a)),[])}const M=s.forwardRef((function(e,r){const n=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:x={},expandText:h="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:b=1,maxItems:g=8,separator:y="/"}=n,Z=(0,a.Z)(n,k),[w,S]=s.useState(!1),M=(0,o.Z)({},n,{component:u,expanded:w,expandText:h,itemsAfterCollapse:f,itemsBeforeCollapse:b,maxItems:g,separator:y}),R=(e=>{const{classes:r}=e;return(0,i.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(M),P=(0,t.y)({elementType:m.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:M}),B=s.useRef(null),A=s.Children.toArray(d).filter((e=>s.isValidElement(e))).map(((e,r)=>(0,v.jsx)("li",{className:R.li,children:e},"child-".concat(r))));return(0,v.jsx)(C,(0,o.Z)({ref:r,component:u,color:"text.secondary",className:(0,l.Z)(R.root,p),ownerState:M},Z,{children:(0,v.jsx)(q,{className:R.ol,ref:B,ownerState:M,children:I(w||g&&A.length<=g?A:(e=>b+f>=e.length?e:[...e.slice(0,b),(0,v.jsx)(j,{"aria-label":h,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:P},onClick:()=>{S(!0);const e=B.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(A),R.separator,y,M)})}))}))}}]);
//# sourceMappingURL=499.a1d464d0.chunk.js.map